const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AIInsights-ax7Zx_PD.js","assets/react-vendor-DUIM87IZ.js","assets/vendor-Cu0CZxEd.js","assets/pdf-vendor-DAaehN9h.js"])))=>i.map(i=>d[i]);
import{u as e,j as s,F as t,a,b as r,c as l,d as i,e as n,L as o,r as d,f as c,g as m,h as x,i as u,k as g,l as h,m as p,n as b,o as f,p as y,q as j,s as v,t as N,v as w,w as C,x as k,y as S,z as R,A,B as q,C as E,D as T,E as I,R as O,G as D,H as F,I as M}from"./react-vendor-DUIM87IZ.js";import{d as L,c as P,i as $}from"./ai-engine-C0iuTVJq.js";import{_ as V}from"./vendor-Cu0CZxEd.js";import{g as B,a as z}from"./generator-BYc-27RH.js";import{e as U,a as G,b as _,c as H}from"./export-BsgR1WKG.js";import"./pdf-vendor-DAaehN9h.js";import"./db-vendor-CG99BKJT.js";import"./firebase-vendor-2an6GMdZ.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const J=({children:d})=>{const c=e(),m=[{path:"/",label:"Dashboard",icon:t},{path:"/generate",label:"Gerar Rápido",icon:a},{path:"/multiphase",label:"Gerar Multi-Fase",icon:r},{path:"/reports",label:"Relatórios",icon:l},{path:"/parameters",label:"Parâmetros",icon:i},{path:"/equipment",label:"Equipamentos",icon:n}];return s.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[s.jsx("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-gray-800 shadow-xl",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"flex items-center justify-center h-16 px-4 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),s.jsx("span",{className:"text-xl font-bold text-white",children:"EletriLab"})]})}),s.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:m.map(e=>{const t=e.icon,a=c.pathname===e.path;return s.jsxs(o,{to:e.path,className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 "+(a?"bg-blue-600 text-white shadow-lg":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:[s.jsx(t,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:e.label})]},e.path)})}),s.jsx("div",{className:"p-4 border-t border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm font-medium",children:"IA Ativa"})]})})]})}),s.jsx("div",{className:"ml-64 bg-gray-900 min-h-screen",children:s.jsx("main",{className:"p-6",children:d})})]})},K=()=>{const[e,t]=d.useState({totalReports:0,totalEquipment:0,totalTests:0,savedToday:0,multiPhase:0,aiLearning:0,resultsDistribution:{BOM:0,"ACEITÁVEL":0,REPROVADO:0},categoryDistribution:{motor:0,painel:0,cabo:0,megger:0,outros:0},recentReports:[],recentTests:[]}),[n,h]=d.useState(!0);d.useEffect(()=>{p()},[]);const p=async()=>{try{h(!0);const e=await L.getDashboardStats();if(P.isEnabled())try{const s=await P.getRecentReports(P.getUserId(),5);s.length>0?t({...e,recentReports:s}):t(e)}catch{t(e)}else t(e)}catch(e){}finally{h(!1)}},b=e=>"reports"in e&&e.reports?`${e.reports.length} Fases - ${e.reports[0]?.id||"N/A"}`:`${e.category.toUpperCase()} - ${e.tag||"Sem Tag"}`,f=e=>"reports"in e?s.jsx(r,{className:"w-4 h-4"}):s.jsx(l,{className:"w-4 h-4"});return n?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold text-white",children:"EletriLab"}),s.jsx("p",{className:"text-gray-400 mt-2 text-lg",children:"Gerador de Relatórios Megger/IR com IA"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm font-medium",children:"IA Ativa"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Relatórios"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:e.totalReports})]}),s.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:s.jsx(l,{className:"w-6 h-6 text-blue-400"})})]})}),s.jsx("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Salvos Hoje"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:e.savedToday})]}),s.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:s.jsx(c,{className:"w-6 h-6 text-green-400"})})]})}),s.jsx("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Multi-Fase"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:e.multiPhase})]}),s.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:s.jsx(r,{className:"w-6 h-6 text-purple-400"})})]})}),s.jsx("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"IA Aprendendo"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:e.aiLearning})]}),s.jsx("div",{className:"p-3 bg-orange-500/20 rounded-lg",children:s.jsx(m,{className:"w-6 h-6 text-orange-400"})})]})})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[s.jsx(a,{className:"w-6 h-6 text-yellow-400"}),s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Ações Rápidas"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(o,{to:"/generate",className:"p-6 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors border border-gray-600",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:s.jsx(l,{className:"w-6 h-6 text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-white",children:"Gerar Rápido"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Relatório único sem salvar"})]})]})}),s.jsx(o,{to:"/multiphase",className:"p-6 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors border border-gray-600",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:s.jsx(r,{className:"w-6 h-6 text-purple-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-white",children:"Gerar Multi-Fase"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Múltiplos relatórios com IA"})]})]})}),s.jsx(o,{to:"/parameters",className:"p-6 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors border border-gray-600",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gray-500/20 rounded-lg",children:s.jsx(i,{className:"w-6 h-6 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-white",children:"Parâmetros"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Configurar perfis e IA"})]})]})})]})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(x,{className:"w-6 h-6 text-blue-400"}),s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Relatórios Recentes"})]}),s.jsx(o,{to:"/reports",className:"text-blue-400 hover:text-blue-300 text-sm font-medium",children:"Ver todos →"})]}),0===e.recentReports.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(l,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-400",children:"Nenhum relatório recente"})]}):s.jsx("div",{className:"space-y-4",children:e.recentReports.slice(0,5).map(e=>{return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg border border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-2 rounded-lg "+("multi"===e.type||e.reports?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"),children:f(e)}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-white",children:b(e)}),s.jsx("p",{className:"text-sm text-gray-400",children:(t=e.createdAt,("string"==typeof t?new Date(t):t).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}))})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[e.isSaved&&s.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs",children:"Salvo"}),s.jsx(o,{to:`/report/${e.type||"ir"}/${e.id}`,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded-lg transition-colors",title:"Visualizar",children:s.jsx(u,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>(async()=>{})(),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded-lg transition-colors",title:"Exportar",children:s.jsx(g,{className:"w-5 h-5"})})]})]},e.id);var t})})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[s.jsx(m,{className:"w-6 h-6 text-orange-400"}),s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Estatísticas de IA"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:"94%"}),s.jsx("p",{className:"text-gray-400",children:"Precisão Geral"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:"89%"}),s.jsx("p",{className:"text-gray-400",children:"Aprendizado"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:"92%"}),s.jsx("p",{className:"text-gray-400",children:"Eficiência"})]})]})]})]})};function W(e){const s=[];if(e.category){const t=function(e){const s=["cabo","motor","bomba","trafo","outro"];return{isValid:s.includes(e),errors:s.includes(e)?[]:[{field:"category",message:"Categoria deve ser: cabo, motor, bomba, trafo, outro",type:"required"}]}}(e.category);s.push(...t.errors)}else s.push({field:"category",message:"Categoria é obrigatória",type:"required"});if(void 0!==e.kv){const t=function(e){const s=[];return"number"!=typeof e||isNaN(e)?s.push({field:"kv",message:"Tensão deve ser um número válido",type:"format"}):(e<.1||e>50)&&s.push({field:"kv",message:"Tensão deve estar entre 0.1 e 50 kV",type:"range"}),{isValid:0===s.length,errors:s}}(e.kv);s.push(...t.errors)}if(e.tag){const t=function(e){if(!e)return{isValid:!0,errors:[]};const s=[];return e.length>50&&s.push({field:"tag",message:"Tag deve ter no máximo 50 caracteres",type:"format"}),/^[a-zA-Z0-9\-\_\s]+$/.test(e)||s.push({field:"tag",message:"Tag deve conter apenas letras, números, hífens e underscores",type:"format"}),{isValid:0===s.length,errors:s}}(e.tag);s.push(...t.errors)}return{isValid:0===s.length,errors:s}}function Z(){return{ok:!0,errors:[]}}function Q(e){if(!e)return"";return("string"==typeof e?new Date(e):e).toLocaleDateString("pt-BR")}d.lazy(()=>V(()=>import("./AIInsights-ax7Zx_PD.js"),__vite__mapDeps([0,1,2,3])));const X=()=>{const e=h(),[t,r]=d.useState(!1),[n,o]=d.useState(!1),[c,x]=d.useState(!1),[u,C]=d.useState(!1),[k,S]=d.useState(null),[R,A]=d.useState({category:"cabo",kv:1,limitTOhm:5,tag:"",client:"",site:"",operator:"",manufacturer:"",model:""}),[q,E]=d.useState(null),[T,I]=d.useState([]),[O,D]=d.useState({});d.useEffect(()=>{F()},[]),d.useEffect(()=>{if(k){const e=setTimeout(()=>{S(null)},5e3);return()=>clearTimeout(e)}},[k]);const F=async()=>{try{const e=await L.getSystemConfig();e&&A(s=>({...s,operator:e.defaultOperator||"",client:e.defaultClient||"",site:e.defaultSite||""}))}catch(e){}},M=(e,s)=>{A(t=>({...t,[e]:s})),T.length>0&&I([]),O[e]&&D(s=>{const t={...s};return delete t[e],t})},P=(e,s)=>{switch(e){case"kv":if(s<.1||s>10)return"Tensão deve estar entre 0.1 e 10 kV";break;case"tag":if(s&&s.length>50)return"Tag deve ter no máximo 50 caracteres";break;case"client":case"site":case"operator":if(s&&s.length>100)return"Campo deve ter no máximo 100 caracteres"}return null},$=async()=>{try{o(!0),I([]);const e=W({category:R.category,kv:R.kv,readings:[],dai:""});if(!e.isValid)return void I(e.errors.map(e=>e.message));const s=await B(R),t={id:`ir_${Date.now()}`,category:R.category,tag:R.tag||void 0,kv:R.kv,client:R.client||void 0,site:R.site||void 0,operator:R.operator||void 0,manufacturer:R.manufacturer||void 0,model:R.model||void 0,readings:s.readings,dai:s.dai,createdAt:new Date,isSaved:!1};E(t),await L.recordAILearning({id:Date.now(),category:R.category,phaseCount:1,input:JSON.stringify(R),output:JSON.stringify(s),createdAt:(new Date).toISOString()})}catch(e){I(["Erro interno ao gerar relatório"])}finally{o(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-900",children:[k&&s.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-right",children:s.jsxs("div",{className:"flex items-center p-4 rounded-lg shadow-lg "+("success"===k.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:["success"===k.type?s.jsx(p,{className:"w-5 h-5 mr-2"}):s.jsx(b,{className:"w-5 h-5 mr-2"}),s.jsx("span",{className:"font-medium",children:k.message}),s.jsx("button",{onClick:()=>S(null),className:"ml-4 text-gray-400 hover:text-gray-600",children:s.jsx(f,{className:"w-4 h-4"})})]})}),s.jsx("div",{className:"pt-4",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-gray-800/70 border border-gray-700 rounded-2xl shadow-xl px-5 sm:px-8 py-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("button",{onClick:()=>e("/"),className:"mr-4 mt-1 p-2 text-gray-400 hover:text-gray-200 transition-colors rounded-lg hover:bg-gray-700","aria-label":"Voltar",children:s.jsx(y,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-extrabold tracking-tight bg-gradient-to-r from-blue-400 via-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"Gerar Relatório Rápido"}),s.jsxs("p",{className:"text-gray-400 mt-1 flex items-center",children:[s.jsx(j,{className:"w-4 h-4 mr-1 text-blue-400"}),"Geração instantânea com IA"]})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"flex items-center text-sm text-gray-200 bg-blue-500/15 px-4 py-2 rounded-full border border-blue-500/30 shadow-inner",children:[s.jsx("span",{className:"relative mr-2 block w-2 h-2 rounded-full bg-blue-400",children:s.jsx("span",{className:"absolute inset-0 rounded-full bg-blue-400 animate-ping opacity-60"})}),s.jsx(m,{className:"w-4 h-4 mr-1 text-blue-400"}),s.jsx("span",{className:"font-medium",children:"IA Ativa"})]})})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-8",children:[s.jsxs("div",{className:"flex items-center mb-8",children:[s.jsx("div",{className:"p-3 bg-blue-500/20 rounded-xl mr-4",children:s.jsx(i,{className:"w-6 h-6 text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Configurações"}),s.jsx("p",{className:"text-gray-400",children:"Configure os parâmetros do teste"})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-4 items-center",children:[s.jsx(a,{className:"w-4 h-4 mr-2 text-blue-400"}),"Categoria do Equipamento *"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[{value:"cabo",label:"Cabo",description:"Cabos de potência e controle"},{value:"motor",label:"Motor",description:"Motores elétricos"},{value:"bomba",label:"Bomba",description:"Bombas e sistemas hidráulicos"},{value:"trafo",label:"Transformador",description:"Transformadores de potência"},{value:"outro",label:"Outro",description:"Outros equipamentos"}].map(e=>s.jsxs("label",{className:"group relative flex flex-col justify-center text-center aspect-square p-4 border-2 rounded-2xl cursor-pointer transition-all duration-200 "+(R.category===e.value?"border-blue-500 bg-blue-500/20 shadow-lg scale-[1.02]":"border-gray-600 bg-gray-800 hover:border-blue-400 hover:bg-gray-700 hover:shadow-md"),children:[s.jsx("input",{type:"radio",name:"category",value:e.value,checked:R.category===e.value,onChange:e=>M("category",e.target.value),className:"sr-only"}),s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"font-semibold text-white group-hover:text-blue-300",children:e.label}),s.jsx("div",{className:"text-sm text-gray-200 mt-1 group-hover:text-blue-300",children:e.description})]}),R.category===e.value&&s.jsx("div",{className:"absolute top-3 right-3 p-2 bg-blue-500 rounded-full",children:s.jsx(p,{className:"w-5 h-5 text-white"})})]},e.value))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[s.jsx(a,{className:"w-4 h-4 mr-2 text-blue-400"}),"Tensão Aplicada (kV)"]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",step:"0.01",min:"0.1",max:"10",value:R.kv,onChange:e=>{const s=parseFloat(e.target.value)||1;M("kv",s);const t=P("kv",s);t&&D(e=>({...e,kv:t}))},className:"w-full px-4 py-3 bg-gray-700 border-2 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all "+(O.kv?"border-red-400 bg-red-500/10":"border-gray-600 focus:border-blue-500"),placeholder:"1.00"}),O.kv&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[s.jsx(b,{className:"w-4 h-4 mr-1"}),O.kv]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"flex text-sm font-semibold text-white mb-3 items-center",children:[s.jsx(v,{className:"w-4 h-4 mr-2 text-blue-400"}),"Tag do Equipamento",s.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(Opcional)"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:R.tag,onChange:e=>{M("tag",e.target.value);const s=P("tag",e.target.value);s&&D(e=>({...e,tag:s}))},placeholder:"Ex: MOTOR-01, TRAFO-02",className:"w-full px-4 py-3 bg-gray-700 border-2 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all "+(O.tag?"border-red-400 bg-red-500/10":"border-gray-600 focus:border-blue-500")}),O.tag&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[s.jsx(b,{className:"w-4 h-4 mr-1"}),O.tag]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-white mb-3",children:"Cliente"}),s.jsx("input",{type:"text",value:R.client,onChange:e=>{M("client",e.target.value);const s=P("client",e.target.value);s&&D(e=>({...e,client:s}))},placeholder:"Nome do cliente",className:"w-full px-4 py-3 bg-gray-700 border-2 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all "+(O.client?"border-red-400 bg-red-500/10":"border-gray-600 focus:border-blue-500")}),O.client&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[s.jsx(b,{className:"w-4 h-4 mr-1"}),O.client]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-white mb-3",children:"Local do Teste"}),s.jsx("input",{type:"text",value:R.site,onChange:e=>{M("site",e.target.value);const s=P("site",e.target.value);s&&D(e=>({...e,site:s}))},placeholder:"Local onde será realizado o teste",className:"w-full px-4 py-3 bg-gray-700 border-2 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all "+(O.site?"border-red-400 bg-red-500/10":"border-gray-600 focus:border-blue-500")}),O.site&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[s.jsx(b,{className:"w-4 h-4 mr-1"}),O.site]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-white mb-3",children:"Operador Responsável"}),s.jsx("input",{type:"text",value:R.operator,onChange:e=>{M("operator",e.target.value);const s=P("operator",e.target.value);s&&D(e=>({...e,operator:s}))},placeholder:"Nome do operador responsável",className:"w-full px-4 py-3 bg-gray-700 border-2 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all "+(O.operator?"border-red-400 bg-red-500/10":"border-gray-600 focus:border-blue-500")}),O.operator&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[s.jsx(b,{className:"w-4 h-4 mr-1"}),O.operator]})]})]}),s.jsx("button",{onClick:$,disabled:n,className:"w-full mt-8 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",children:n?s.jsxs(s.Fragment,{children:[s.jsx(N,{className:"w-6 h-6 mr-3 animate-spin"}),"Gerando com IA..."]}):s.jsxs(s.Fragment,{children:[s.jsx(j,{className:"w-6 h-6 mr-3"}),"Gerar Relatório com IA"]})})]}),s.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-8",children:[s.jsxs("div",{className:"flex items-center mb-8",children:[s.jsx("div",{className:"p-3 bg-green-500/20 rounded-xl mr-4",children:s.jsx(l,{className:"w-6 h-6 text-green-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Preview do Relatório"}),s.jsx("p",{className:"text-gray-400",children:"Visualização em tempo real"})]})]}),T.length>0&&s.jsx("div",{className:"mb-6 p-6 bg-red-50 border-2 border-red-200 rounded-xl",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(b,{className:"w-6 h-6 text-red-500 mr-3 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erros encontrados:"}),s.jsx("ul",{className:"space-y-1 text-sm text-red-700",children:T.map((e,t)=>s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-2"}),e]},t))})]})]})}),q?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(v,{className:"w-5 h-5 mr-2 text-blue-400"}),"Informações do Relatório"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Categoria:"}),s.jsx("span",{className:"ml-3 capitalize bg-gray-700 text-white px-3 py-1 rounded-lg text-sm font-medium",children:q.category})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Tensão:"}),s.jsxs("span",{className:"ml-3 bg-gray-700 text-white px-3 py-1 rounded-lg text-sm font-medium",children:[q.kv," kV"]})]}),q.tag&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Tag:"}),s.jsx("span",{className:"ml-3 bg-gray-700 text-white px-3 py-1 rounded-lg text-sm font-medium",children:q.tag})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"DAI:"}),s.jsx("span",{className:"ml-3 bg-blue-500/20 text-blue-300 px-3 py-1 rounded-lg text-sm font-semibold",children:q.dai})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(a,{className:"w-5 h-5 mr-2 text-green-400"}),"Série de Leituras IR"]}),s.jsx("div",{className:"border-2 border-gray-700 rounded-xl overflow-hidden shadow-sm",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-200 uppercase tracking-wider",children:"Tempo"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-200 uppercase tracking-wider",children:"Tensão (kV)"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-200 uppercase tracking-wider",children:"Resistência"})]})}),s.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:q.readings.map((e,t)=>s.jsxs("tr",{className:"hover:bg-gray-700 transition-colors",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-200",children:e.time}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-200",children:e.kv}),s.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-200",children:e.resistance})]},t))})]})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[s.jsxs("button",{onClick:()=>{E(null),$()},disabled:n,className:"flex-1 bg-gray-700 text-gray-200 py-3 px-6 rounded-xl hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold transition-all duration-200 hover:scale-[1.02]",children:[s.jsx(N,{className:"w-5 h-5 mr-2"}),"Regenerar"]}),s.jsx("button",{onClick:async()=>{if(q)try{x(!0);const e=await L.getNextReportNumber(),s={...q,number:e,isSaved:!0};await L.saveIRReport(s),E(s),S({type:"success",message:"Relatório salvo com sucesso!"})}catch(e){I(["Erro ao salvar relatório"])}finally{x(!1)}},disabled:c||q.isSaved,className:"flex-1 py-3 px-6 rounded-xl focus:outline-none focus:ring-4 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold transition-all duration-200 hover:scale-[1.02] "+(q.isSaved?"bg-green-100 text-green-700 border-2 border-green-300":"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 focus:ring-green-300"),children:c?s.jsxs(s.Fragment,{children:[s.jsx(N,{className:"w-5 h-5 mr-2 animate-spin"}),"Salvando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(w,{className:"w-5 h-5 mr-2"}),q.isSaved?"✓ Salvo":"Salvar no Banco"]})}),s.jsx("button",{onClick:async()=>{if(q)try{C(!0);const e=await U(q),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`relatorio_ir_${q.category}_${(new Date).toISOString().split("T")[0]}.pdf`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)}catch(e){I(["Erro ao exportar relatório"])}finally{C(!1)}},disabled:u,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold transition-all duration-200 hover:scale-[1.02]",children:u?s.jsxs(s.Fragment,{children:[s.jsx(N,{className:"w-5 h-5 mr-2 animate-spin"}),"Exportando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(g,{className:"w-5 h-5 mr-2"}),"Exportar PDF"]})})]})]}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500/20 to-indigo-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(l,{className:"w-12 h-12 text-blue-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Nenhum relatório gerado"}),s.jsx("p",{className:"text-gray-300 mb-4",children:'Configure os parâmetros e clique em "Gerar Relatório com IA"'}),s.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-400",children:[s.jsx(j,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"A IA irá gerar dados realistas automaticamente"})]})]})]})]})})]})};function Y(e){return{id:parseInt(e.id)||0,name:e.tag,category:e.category,manufacturer:e.manufacturer,model:e.model,tag:e.tag,calibrationDue:e.lastMaintenance,nextCalibration:e.installationDate}}function ee(e){return{id:parseInt(e.id)||0,reportId:parseInt(e.reportId)||0,type:e.testType,value:e.value,unit:e.unit,classification:e.result,measuredAt:e.performedAt}}async function se(){try{return(await L.getAllEquipment()).map(Y)}catch(e){return[]}}async function te(){try{return await L.getConfiguration()}catch(e){return{}}}async function ae(e){try{const s={reportId:String(e.reportId),equipmentId:String(e.reportId),testType:"megger",value:e.value,unit:e.unit,result:"BOM",limits:{min:0,good:100,unit:e.unit},notes:"",performedBy:"",performedAt:e.measuredAt},t=await L.addTest(s);return{id:parseInt(t)||Math.random()}}catch(s){return{id:Math.random()}}}async function re(e){try{const s=await L.getReportById(String(e));return s?function(e){return{id:e.id,createdAt:new Date(e.createdAt),category:"cabo",kv:1,readings:[],dai:"Undefined",isSaved:!1,operator:e.responsible,site:e.location,client:e.client,notes:e.observations}}(s):void 0}catch(s){return}}async function le(e){try{return(await L.getTestsByReportId(String(e))).map(ee)}catch(s){return[]}}function ie(){const e=h(),[t,r]=d.useState(!1),[l,i]=d.useState([]),[n,o]=d.useState([]),[c,m]=d.useState({number:"",date:(new Date).toISOString().split("T")[0],client:"",location:"",responsible:"",observations:"",recommendations:""});d.useEffect(()=>{x()},[]);const x=async()=>{try{const e=await se();i(e)}catch(e){}},u=(e,s,t)=>{const a=[...n];a[e]={...a[e],[s]:t},"testType"===s&&(a[e].unit="megger"===t?"MΩ":"V",a[e].value=0,a[e].result=""),o(a)},g=async e=>{const s=n[e];if(!s.equipmentId)return;if(l.find(e=>String(e.id)===String(s.equipmentId)))try{await te();const s=function(e=1,s=10){return Math.random()*(s-e)+e}(),t=s>=1e6?"OK":"ALERTA";u(e,"value",s),u(e,"result",t)}catch(t){}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Novo Relatório"})}),s.jsxs("form",{onSubmit:async s=>{s.preventDefault();try{r(!0);const s=W(c);if(!s.isValid)return void alert("Erro de validação no relatório: "+s.errors.map(e=>e.message).join(", "));for(let e=0;e<n.length;e++){Z().ok}const t=await async function(e){try{const s={number:String(e.id||Math.random()),date:e.createdAt.toISOString(),client:e.client||"",location:e.site||"",responsible:e.operator||"",status:"rascunho",tests:[],observations:e.notes||"",recommendations:"",attachments:[]},t=await L.addReport(s);return{id:parseInt(t)||Math.random()}}catch(s){return{id:Math.random()}}}({id:crypto.randomUUID(),category:"cabo",kv:1,readings:[],dai:"Undefined",isSaved:!1,createdAt:new Date,...c,status:"rascunho"});await te();for(const e of n){l.find(s=>String(s.id)===String(e.equipmentId))&&await ae({reportId:Number(t.id),equipmentId:e.equipmentId,type:e.testType,value:e.value,unit:e.unit,classification:"OK",measuredAt:e.performedAt})}e(`/report/${t}`)}catch(t){alert("Erro ao salvar relatório")}finally{r(!1)}},className:"space-y-8",children:[s.jsxs("div",{className:"card p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Informações do Relatório"}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Número do Relatório"}),s.jsx("input",{type:"text",className:"input",value:c.number,onChange:e=>m({...c,number:e.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Data"}),s.jsx("input",{type:"date",className:"input",value:c.date,onChange:e=>m({...c,date:e.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Cliente"}),s.jsx("input",{type:"text",className:"input",value:c.client,onChange:e=>m({...c,client:e.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Local"}),s.jsx("input",{type:"text",className:"input",value:c.location,onChange:e=>m({...c,location:e.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Responsável"}),s.jsx("input",{type:"text",className:"input",value:c.responsible,onChange:e=>m({...c,responsible:e.target.value}),required:!0})]})]})]}),s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Testes"}),s.jsxs("button",{type:"button",onClick:()=>{const e={equipmentId:"",testType:"IR",value:0,unit:"MΩ",result:"",notes:"",performedBy:"",performedAt:(new Date).toISOString().split("T")[0]};o([...n,e])},className:"btn-primary",children:[s.jsx(C,{className:"h-4 w-4 mr-2"}),"Adicionar Teste"]})]}),0===n.length?s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:'Nenhum teste adicionado. Clique em "Adicionar Teste" para começar.'}):s.jsx("div",{className:"space-y-6",children:n.map((e,t)=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-md font-medium text-gray-900 dark:text-white",children:["Teste ",t+1]}),s.jsx("button",{type:"button",onClick:()=>(e=>{o(n.filter((s,t)=>t!==e))})(t),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:s.jsx(f,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Equipamento"}),s.jsxs("select",{className:"input",value:e.equipmentId,onChange:e=>u(t,"equipmentId",e.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Selecione um equipamento"}),l.map(e=>s.jsxs("option",{value:e.id,children:[e.tag," - ",e.description]},e.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Tipo de Teste"}),s.jsxs("select",{className:"input",value:e.testType,onChange:e=>u(t,"testType",e.target.value),required:!0,children:[s.jsx("option",{value:"megger",children:"Megger"}),s.jsx("option",{value:"hipot",children:"Hipot"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Valor"}),s.jsxs("div",{className:"flex",children:[s.jsx("input",{type:"number",step:"0.1",className:"input rounded-r-none",value:e.value,onChange:e=>u(t,"value",parseFloat(e.target.value)||0),required:!0}),s.jsx("button",{type:"button",onClick:()=>g(t),className:"px-3 py-2 bg-gray-100 dark:bg-gray-700 border border-l-0 border-gray-300 dark:border-gray-600 rounded-r-lg hover:bg-gray-200 dark:hover:bg-gray-600",title:"Gerar valor aleatório",children:s.jsx(a,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Unidade"}),s.jsx("input",{type:"text",className:"input",value:e.unit,readOnly:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Resultado"}),s.jsx("input",{type:"text",className:"input",value:e.result,readOnly:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Data do Teste"}),s.jsx("input",{type:"date",className:"input",value:e.performedAt,onChange:e=>u(t,"performedAt",e.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Responsável pelo Teste"}),s.jsx("input",{type:"text",className:"input",value:e.performedBy,onChange:e=>u(t,"performedBy",e.target.value),required:!0})]}),s.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[s.jsx("label",{className:"label",children:"Observações"}),s.jsx("textarea",{className:"input",rows:2,value:e.notes,onChange:e=>u(t,"notes",e.target.value)})]})]})]},t))})]}),s.jsxs("div",{className:"card p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Observações e Recomendações"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Observações"}),s.jsx("textarea",{className:"input",rows:4,value:c.observations,onChange:e=>m({...c,observations:e.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Recomendações"}),s.jsx("textarea",{className:"input",rows:4,value:c.recommendations,onChange:e=>m({...c,recommendations:e.target.value})})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:()=>e("/"),className:"btn-secondary",children:"Cancelar"}),s.jsxs("button",{type:"submit",disabled:t,className:"btn-primary",children:[t?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):s.jsx(w,{className:"h-4 w-4 mr-2"}),"Salvar Relatório"]})]})]})]})}function ne(){const{id:e}=k(),[t,a]=d.useState(null),[r,l]=d.useState([]),[i,n]=d.useState([]),[o,c]=d.useState(!0);d.useEffect(()=>{e&&m(e)},[e]);const m=async e=>{try{c(!0);const[s,t,r]=await Promise.all([re(e),le(e),se()]);s&&(a(s),l(t),n(r))}catch(s){}finally{c(!1)}};return o?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:()=>window.history.back(),className:"btn-secondary",children:[s.jsx(y,{className:"h-4 w-4 mr-2"}),"Voltar"]}),s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Relatório ",t.number]})]}),s.jsxs("button",{onClick:()=>{},className:"btn-primary",children:[s.jsx(g,{className:"h-4 w-4 mr-2"}),"Exportar PDF"]})]}),s.jsxs("div",{className:"card p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Informações do Relatório"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Número"}),s.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:t.number})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Data"}),s.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:Q(t.date||t.createdAt)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Cliente"}),s.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:t.client})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Local"}),s.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:t.location||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Responsável"}),s.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:t.responsible||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),s.jsx("span",{className:`\n              badge\n              ${"aprovado"===t.status?"badge-success":""}\n              ${"reprovado"===t.status?"badge-danger":""}\n              ${"finalizado"===t.status?"badge-info":""}\n              ${"rascunho"===t.status?"badge-warning":""}\n            `,children:(t.status||"rascunho").toUpperCase()})]})]})]}),r.length>0&&s.jsxs("div",{className:"card p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Resultados dos Testes"}),s.jsx("div",{className:"overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Equipamento"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Valor"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Resultado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Data"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Responsável"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map(e=>{const t=i.find(s=>String(s.id)===String(e.equipmentId));return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t&&t.tag||"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(e.testType||e.type||"N/A").toUpperCase()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(a=e.value,r=e.unit,`${a.toFixed(2)} ${r}`)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`\n                          badge\n                          ${"BOM"===e.result?"badge-success":""}\n                          ${"ACEITÁVEL"===e.result?"badge-warning":""}\n                          ${"REPROVADO"===e.result?"badge-danger":""}\n                        `,children:e.result||e.classification||"N/A"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:Q(e.performedAt||e.measuredAt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.performedBy||"N/A"})]},e.id);var a,r})})]})})]}),(t.observations||t.recommendations)&&s.jsxs("div",{className:"card p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Observações e Recomendações"}),s.jsxs("div",{className:"space-y-4",children:[t.observations&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Observações"}),s.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:t.observations})]}),t.recommendations&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Recomendações"}),s.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:t.recommendations})]})]})]})]}):s.jsx("div",{className:"text-center py-8",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Relatório não encontrado"})})}function oe(){const[e,t]=d.useState([]),[a,r]=d.useState(!0),[l,i]=d.useState(""),[o,c]=d.useState(!1),[m,x]=d.useState(null),[u,g]=d.useState({tag:"",category:"motor",description:"",location:"",manufacturer:"",model:"",serialNumber:"",installationDate:"",lastMaintenance:"",status:"ativo",notes:""});d.useEffect(()=>{h()},[]);const h=async()=>{try{r(!0);const e=await se();t(e)}catch(e){}finally{r(!1)}},p=async e=>{if(confirm("Tem certeza que deseja excluir este equipamento?"))try{await async function(e){try{return await L.deleteEquipment(String(e))}catch(s){return null}}(e),h()}catch(s){alert("Erro ao deletar equipamento")}},b=()=>{g({tag:"",category:"motor",description:"",location:"",manufacturer:"",model:"",serialNumber:"",installationDate:"",lastMaintenance:"",status:"ativo",notes:""})},f=e.filter(e=>(e.tag||"").toLowerCase().includes(l.toLowerCase())||(e.description||"").toLowerCase().includes(l.toLowerCase())||(e.location||"").toLowerCase().includes(l.toLowerCase()));return a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),s.jsx("p",{className:"text-gray-400 mt-4",children:"Carregando equipamentos..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Lista de Equipamentos"}),s.jsx("p",{className:"text-gray-400",children:"Gerencie todos os equipamentos do sistema"})]}),s.jsxs("button",{onClick:()=>{c(!0),x(null),b()},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-semibold flex items-center space-x-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[s.jsx(C,{className:"h-5 w-5"}),s.jsx("span",{children:"Novo Equipamento"})]})]}),o&&s.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 p-8 shadow-xl",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-xl mr-4",children:s.jsx(C,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:m?"Editar Equipamento":"Novo Equipamento"}),s.jsx("p",{className:"text-gray-400",children:m?"Atualize as informações do equipamento":"Adicione um novo equipamento ao sistema"})]})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e={...u,name:u.tag||u.description,id:m?.id};({ok:!0,errors:[]}).ok,m&&void 0!==m.id?await async function(e,s){try{const t={tag:s.tag||s.name,description:s.name,manufacturer:s.manufacturer,model:s.model};return await L.updateEquipment(String(e),t)}catch(t){return null}}(m.id,e):await async function(e){try{const s={tag:e.tag||e.name,category:"motor",description:e.name,location:"",manufacturer:e.manufacturer||"",model:e.model||"",serialNumber:"",installationDate:e.nextCalibration||(new Date).toISOString(),lastMaintenance:e.calibrationDue||(new Date).toISOString(),status:"ativo",notes:""};return await L.addEquipment(s)}catch(s){return null}}(e),c(!1),x(null),b(),h()}catch(s){alert("Erro ao salvar equipamento")}},className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Tag *"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.tag,onChange:e=>g({...u,tag:e.target.value}),placeholder:"Ex: MOTOR-01, TRAFO-02",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Categoria *"}),s.jsxs("select",{className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.category,onChange:e=>g({...u,category:e.target.value}),required:!0,children:[s.jsx("option",{value:"motor",children:"Motor"}),s.jsx("option",{value:"transformador",children:"Transformador"}),s.jsx("option",{value:"gerador",children:"Gerador"}),s.jsx("option",{value:"painel",children:"Painel"}),s.jsx("option",{value:"cabo",children:"Cabo"}),s.jsx("option",{value:"outro",children:"Outro"})]})]}),s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Descrição *"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.description,onChange:e=>g({...u,description:e.target.value}),placeholder:"Descrição detalhada do equipamento",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Localização *"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.location,onChange:e=>g({...u,location:e.target.value}),placeholder:"Ex: Sala 01, Subestação A",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Fabricante *"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.manufacturer,onChange:e=>g({...u,manufacturer:e.target.value}),placeholder:"Ex: WEG, Siemens, ABB",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Modelo *"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.model,onChange:e=>g({...u,model:e.target.value}),placeholder:"Ex: W22, 1LA7",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Número de Série *"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.serialNumber,onChange:e=>g({...u,serialNumber:e.target.value}),placeholder:"Número de série do equipamento",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Data de Instalação *"}),s.jsx("input",{type:"date",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.installationDate,onChange:e=>g({...u,installationDate:e.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Última Manutenção"}),s.jsx("input",{type:"date",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.lastMaintenance,onChange:e=>g({...u,lastMaintenance:e.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Status *"}),s.jsxs("select",{className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.status,onChange:e=>g({...u,status:e.target.value}),required:!0,children:[s.jsx("option",{value:"ativo",children:"Ativo"}),s.jsx("option",{value:"inativo",children:"Inativo"}),s.jsx("option",{value:"manutencao",children:"Manutenção"})]})]}),s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Observações"}),s.jsx("textarea",{className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",rows:3,value:u.notes,onChange:e=>g({...u,notes:e.target.value}),placeholder:"Observações adicionais sobre o equipamento"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-700",children:[s.jsx("button",{type:"button",onClick:()=>{c(!1),x(null),b()},className:"px-6 py-3 bg-gray-700 text-gray-200 rounded-xl hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-all duration-200 font-semibold",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105",children:m?"Atualizar Equipamento":"Salvar Equipamento"})]})]})]}),s.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 p-8 shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-green-100 rounded-xl mr-4",children:s.jsx(n,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Equipamentos Cadastrados"}),s.jsxs("p",{className:"text-gray-400",children:[f.length," equipamento(s) encontrado(s)"]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(S,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar equipamentos...",className:"w-80 pl-12 pr-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:l,onChange:e=>i(e.target.value)})]})]}),s.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-700",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider",children:"Tag"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider",children:"Categoria"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider",children:"Localização"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"relative px-6 py-4",children:s.jsx("span",{className:"sr-only",children:"Ações"})})]})}),s.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:0===f.length?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(n,{className:"h-12 w-12 text-gray-500 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"Nenhum equipamento encontrado"}),s.jsx("p",{className:"text-gray-500 mb-4",children:l?"Tente ajustar os termos de busca":"Comece adicionando um novo equipamento"}),!l&&s.jsxs("button",{onClick:()=>{c(!0),x(null),b()},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-semibold flex items-center space-x-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[s.jsx(C,{className:"h-5 w-5"}),s.jsx("span",{children:"Adicionar Equipamento"})]})]})})}):f.map(e=>s.jsxs("tr",{className:"hover:bg-gray-700 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-white",children:e.tag||"N/A"}),s.jsx("div",{className:"text-sm text-gray-400",children:e.description||"N/A"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400",children:e.category})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.location||"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`\n                        inline-flex items-center px-3 py-1 rounded-full text-xs font-medium\n                        ${"ativo"===e.status?"bg-green-500/20 text-green-400":""}\n                        ${"inativo"===e.status?"bg-red-500/20 text-red-400":""}\n                        ${"manutencao"===e.status?"bg-yellow-500/20 text-yellow-400":""}\n                      `,children:(e.status||"ativo").toUpperCase()})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{return x(s=e),g({tag:s.tag||"",category:s.category,description:s.description||"",location:s.location||"",manufacturer:s.manufacturer||"",model:s.model||"",serialNumber:s.serialNumber||"",installationDate:s.installationDate||"",lastMaintenance:s.lastMaintenance||"",status:s.status||"ativo",notes:s.notes||""}),void c(!0);var s},className:"text-blue-400 hover:text-blue-300 p-2 rounded-lg hover:bg-blue-500/10 transition-all duration-200",title:"Editar equipamento",children:s.jsx(R,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>p(e.id||0),className:"text-red-400 hover:text-red-300 p-2 rounded-lg hover:bg-red-500/10 transition-all duration-200",title:"Excluir equipamento",children:s.jsx(A,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})]})}const de=()=>{const e=h(),[t,a]=d.useState(!0),[r,l]=d.useState(!1),[n,o]=d.useState({id:"",defaultOperator:"",defaultClient:"",defaultSite:"",aiEnabled:!0,aiLearningRate:.1,defaultLimitTOhm:5,createdAt:new Date,updatedAt:new Date}),[c,x]=d.useState([]),[u,g]=d.useState(null),[p,b]=d.useState(!1);d.useEffect(()=>{f()},[]);const f=async()=>{try{a(!0);const[e,s]=await Promise.all([L.getSystemConfig(),L.getCategoryProfiles()]);e&&o(e),x(s)}catch(e){}finally{a(!1)}},j=(e,s)=>{o(t=>({...t,[e]:s}))};return t?s.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando parâmetros..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-900",children:[s.jsx("div",{className:"pt-4",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-gray-800/70 border border-gray-700 rounded-2xl shadow-xl px-5 sm:px-8 py-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("button",{onClick:()=>e("/"),className:"mr-4 mt-1 p-2 text-gray-400 hover:text-gray-200 transition-colors rounded-lg hover:bg-gray-700","aria-label":"Voltar",children:s.jsx(y,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-extrabold tracking-tight bg-gradient-to-r from-blue-400 via-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"Parâmetros e Configurações"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Configure perfis por categoria e sistema de IA"})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"flex items-center text-sm text-gray-200 bg-blue-500/15 px-4 py-2 rounded-full border border-blue-500/30 shadow-inner",children:[s.jsx("span",{className:"relative mr-2 block w-2 h-2 rounded-full bg-blue-400",children:s.jsx("span",{className:"absolute inset-0 rounded-full bg-blue-400 animate-ping opacity-60"})}),s.jsx(m,{className:"w-4 h-4 mr-1 text-blue-400"}),s.jsx("span",{className:"font-medium",children:"IA Ativa"})]})})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-700/40",children:s.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center",children:[s.jsx(i,{className:"w-5 h-5 mr-2 text-blue-400"}),"Configurações do Sistema"]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-medium text-white mb-4",children:"Configurações Padrão"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Operador Padrão"}),s.jsx("input",{type:"text",value:n.defaultOperator,onChange:e=>j("defaultOperator",e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Cliente Padrão"}),s.jsx("input",{type:"text",value:n.defaultClient,onChange:e=>j("defaultClient",e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Local Padrão"}),s.jsx("input",{type:"text",value:n.defaultSite,onChange:e=>j("defaultSite",e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Limite OVRG Padrão (TΩ)"}),s.jsx("input",{type:"number",min:"1",max:"10",value:n.defaultLimitTOhm,onChange:e=>j("defaultLimitTOhm",parseInt(e.target.value)),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-md font-medium text-white mb-4 flex items-center",children:[s.jsx(m,{className:"w-4 h-4 mr-2 text-blue-400"}),"Configurações de IA"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"aiEnabled",checked:n.aiEnabled,onChange:e=>j("aiEnabled",e.target.checked),className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-600 rounded bg-gray-700"}),s.jsx("label",{htmlFor:"aiEnabled",className:"ml-2 block text-sm text-gray-200",children:"IA Habilitada"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Taxa de Aprendizado da IA"}),s.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",value:n.aiLearningRate,onChange:e=>j("aiLearningRate",parseFloat(e.target.value)),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Controla a velocidade de aprendizado da IA (0.0 - 1.0)"})]})]})]}),s.jsx("button",{onClick:async()=>{try{l(!0),await L.saveSystemConfig(n),alert("Configurações salvas com sucesso!")}catch(e){alert("Erro ao salvar configurações")}finally{l(!1)}},disabled:r,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-4 rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:r?s.jsxs(s.Fragment,{children:[s.jsx(N,{className:"w-5 h-5 mr-2 animate-spin"}),"Salvando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(w,{className:"w-5 h-5 mr-2"}),"Salvar Configurações"]})})]})]}),s.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-700/40",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center",children:[s.jsx(m,{className:"w-5 h-5 mr-2 text-blue-400"}),"Perfis por Categoria"]}),s.jsx("button",{onClick:()=>b(!0),className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-2 rounded-lg hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-gray-900",children:s.jsx(C,{className:"w-4 h-4"})})]})}),s.jsx("div",{className:"p-6",children:0===c.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(m,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-300",children:"Nenhum perfil configurado"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Crie perfis para melhorar a precisão da IA"})]}):s.jsx("div",{className:"space-y-4",children:c.map(e=>s.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 hover:bg-gray-700 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-white",children:e.name}),s.jsx("p",{className:"text-sm text-gray-300",children:e.description})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-300",children:e.category}),s.jsx("button",{onClick:()=>g(e),className:"p-1 text-gray-300 hover:text-white",children:s.jsx(R,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>(async e=>{if(confirm("Tem certeza que deseja excluir este perfil?"))try{l(!0),await L.deleteCategoryProfile(e),await f(),alert("Perfil excluído com sucesso!")}catch(s){alert("Erro ao excluir perfil")}finally{l(!1)}})(e.id),className:"p-1 text-gray-300 hover:text-red-400",children:s.jsx(A,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-300",children:"Confiança IA:"}),s.jsxs("span",{className:"ml-2 text-white",children:[(100*e.aiConfidence).toFixed(0),"%"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-300",children:"Resistência Base:"}),s.jsxs("span",{className:"ml-2 text-white",children:[e.baseResistance.min.toExponential(1)," - ",e.baseResistance.max.toExponential(1)," Ω"]})]})]})]},e.id))})})]})]}),(u||p)&&s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-700/40",children:s.jsx("h3",{className:"text-lg font-semibold text-white",children:u?"Editar Perfil":"Novo Perfil"})}),s.jsx("div",{className:"p-6",children:s.jsx(ce,{profile:u||(v="cabo",{id:"",category:v,name:`Perfil ${v.charAt(0).toUpperCase()+v.slice(1)}`,description:`Perfil padrão para ${v}`,baseResistance:{min:1e6,max:1e9,decay:.1},temperature:{min:20,max:30,effect:.02},humidity:{min:40,max:60,effect:.01},aiConfidence:.9,createdAt:new Date}),onSave:async e=>{try{l(!0),e.id,await L.saveCategoryProfile(e),await f(),g(null),b(!1),alert("Perfil salvo com sucesso!")}catch(s){alert("Erro ao salvar perfil")}finally{l(!1)}},onCancel:()=>{g(null),b(!1)},onChange:(e,s)=>{u&&g(t=>t?{...t,[e]:s}:null)},saving:r})})]})})]})]});var v},ce=({profile:e,onSave:t,onCancel:a,onChange:r,saving:l})=>s.jsxs("div",{className:"space-y-6 text-gray-200",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Nome do Perfil"}),s.jsx("input",{type:"text",value:e.name,onChange:e=>r("name",e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Categoria"}),s.jsxs("select",{value:e.category,onChange:e=>r("category",e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"cabo",children:"Cabo"}),s.jsx("option",{value:"motor",children:"Motor"}),s.jsx("option",{value:"bomba",children:"Bomba"}),s.jsx("option",{value:"trafo",children:"Transformador"}),s.jsx("option",{value:"outro",children:"Outro"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Descrição"}),s.jsx("textarea",{value:e.description,onChange:e=>r("description",e.target.value),rows:3,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-medium text-white mb-4",children:"Resistência Base"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Mínima (Ω)"}),s.jsx("input",{type:"number",value:e.baseResistance.min,onChange:s=>r("baseResistance",{...e.baseResistance,min:parseFloat(s.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Máxima (Ω)"}),s.jsx("input",{type:"number",value:e.baseResistance.max,onChange:s=>r("baseResistance",{...e.baseResistance,max:parseFloat(s.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Decaimento (%)"}),s.jsx("input",{type:"number",step:"0.01",value:100*e.baseResistance.decay,onChange:s=>r("baseResistance",{...e.baseResistance,decay:parseFloat(s.target.value)/100}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-medium text-white mb-4",children:"Temperatura"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Mínima (°C)"}),s.jsx("input",{type:"number",value:e.temperature.min,onChange:s=>r("temperature",{...e.temperature,min:parseFloat(s.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Máxima (°C)"}),s.jsx("input",{type:"number",value:e.temperature.max,onChange:s=>r("temperature",{...e.temperature,max:parseFloat(s.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Efeito (%/°C)"}),s.jsx("input",{type:"number",step:"0.001",value:100*e.temperature.effect,onChange:s=>r("temperature",{...e.temperature,effect:parseFloat(s.target.value)/100}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-medium text-white mb-4",children:"Umidade"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Mínima (%)"}),s.jsx("input",{type:"number",value:e.humidity.min,onChange:s=>r("humidity",{...e.humidity,min:parseFloat(s.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Máxima (%)"}),s.jsx("input",{type:"number",value:e.humidity.max,onChange:s=>r("humidity",{...e.humidity,max:parseFloat(s.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Efeito (%/%)"}),s.jsx("input",{type:"number",step:"0.001",value:100*e.humidity.effect,onChange:s=>r("humidity",{...e.humidity,effect:parseFloat(s.target.value)/100}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Confiança da IA (0-100%)"}),s.jsx("input",{type:"number",min:"0",max:"100",value:100*e.aiConfidence,onChange:e=>r("aiConfidence",parseFloat(e.target.value)/100),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{onClick:a,className:"flex-1 bg-gray-700 text-gray-200 py-2 px-4 rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500/50 focus:ring-offset-2 focus:ring-offset-gray-900",children:"Cancelar"}),s.jsx("button",{onClick:()=>t(e),disabled:l,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-2 px-4 rounded-md hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:l?s.jsxs(s.Fragment,{children:[s.jsx(N,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(w,{className:"w-4 h-4 mr-2"}),"Salvar Perfil"]})})]})]}),me=()=>{const e=h(),[t,n]=d.useState(!1),[o,c]=d.useState(!1),[x,u]=d.useState(!1),[N,w]=d.useState(!1),[k,S]=d.useState(null),[R,E]=d.useState("motor"),[T,I]=d.useState(1),[O,D]=d.useState(60),[F,M]=d.useState(""),[P,$]=d.useState(""),[V,B]=d.useState(["R","S","T"]),[U,_]=d.useState("Terra"),[H,J]=d.useState([["R","S"],["S","T"],["T","R"]]),[K,W]=d.useState(null),[Z,Q]=d.useState([]),[X,Y]=d.useState(0),[ee,se]=d.useState([]);d.useEffect(()=>{te(),ae()},[]),d.useEffect(()=>{if(k){const e=setTimeout(()=>{S(null)},5e3);return()=>clearTimeout(e)}},[k]);const te=async()=>{try{const e=await L.getCategoryProfiles();se(e)}catch(e){}},ae=async()=>{try{const e=await L.getSystemConfig();e&&$(e.defaultOperator||"")}catch(e){}},re=(e,s)=>{S({type:e,message:s})},le=(e,s,t)=>{const a=[...H];a[e][s]=t,J(a)};return s.jsxs("div",{className:"min-h-screen bg-gray-900",children:[k&&s.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-right",children:s.jsxs("div",{className:"flex items-center p-4 rounded-lg shadow-lg "+("success"===k.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:["success"===k.type?s.jsx(p,{className:"w-5 h-5 mr-2"}):s.jsx(b,{className:"w-5 h-5 mr-2"}),s.jsx("span",{className:"font-medium",children:k.message}),s.jsx("button",{onClick:()=>S(null),className:"ml-4 text-gray-400 hover:text-gray-600",children:s.jsx(f,{className:"w-4 h-4"})})]})}),s.jsx("div",{className:"pt-4",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-gray-800/70 border border-gray-700 rounded-2xl shadow-xl px-5 sm:px-8 py-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("button",{onClick:()=>e("/"),className:"mr-4 mt-1 p-2 text-gray-400 hover:text-gray-200 transition-colors rounded-lg hover:bg-gray-700","aria-label":"Voltar",children:s.jsx(y,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-extrabold tracking-tight bg-gradient-to-r from-purple-400 via-indigo-400 to-blue-400 bg-clip-text text-transparent",children:"Gerador Multi-Fase"}),s.jsxs("p",{className:"text-gray-400 mt-1 flex items-center",children:[s.jsx(j,{className:"w-4 h-4 mr-1 text-purple-400"}),"Relatórios IR para equipamentos multi-fase com IA"]})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"flex items-center text-sm text-gray-200 bg-purple-500/15 px-4 py-2 rounded-full border border-purple-500/30 shadow-inner",children:[s.jsx("span",{className:"relative mr-2 block w-2 h-2 rounded-full bg-purple-400",children:s.jsx("span",{className:"absolute inset-0 rounded-full bg-purple-400 animate-ping opacity-60"})}),s.jsx(m,{className:"w-4 h-4 mr-1 text-purple-400"}),s.jsx("span",{className:"font-medium",children:"IA Ativa"})]})})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-8",children:[s.jsxs("div",{className:"flex items-center mb-8",children:[s.jsx("div",{className:"p-3 bg-purple-500/20 rounded-xl mr-4",children:s.jsx(i,{className:"w-6 h-6 text-purple-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Configuração do Equipamento"}),s.jsx("p",{className:"text-gray-400",children:"Configure os parâmetros do teste multi-fase"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[s.jsx(a,{className:"w-4 h-4 mr-2 text-purple-400"}),"Tipo de Equipamento"]}),s.jsx("select",{className:"w-full px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",value:R,onChange:e=>E(e.target.value),children:[{value:"motor",label:"Motor",description:"Motores elétricos"},{value:"trafo",label:"Transformador",description:"Transformadores de potência"},{value:"bomba",label:"Bomba",description:"Bombas e sistemas hidráulicos"},{value:"cabo",label:"Cabo",description:"Cabos de potência multi-condutores"},{value:"outro",label:"Outro",description:"Outros equipamentos multi-fase"}].map(e=>s.jsxs("option",{value:e.value,children:[e.label," - ",e.description]},e.value))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[s.jsx(a,{className:"w-4 h-4 mr-2 text-purple-400"}),"Tensão (kV)"]}),s.jsx("input",{type:"number",className:"w-full px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",value:T,onChange:e=>I(Number(e.target.value)),step:"0.1",min:"0.1",max:"50",placeholder:"1.0"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[s.jsx(v,{className:"w-4 h-4 mr-2 text-gray-400"}),"Duração (min)"]}),s.jsx("input",{type:"number",className:"w-full px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",value:O,onChange:e=>D(Number(e.target.value)),min:"60",max:"600",placeholder:"60"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[s.jsx(v,{className:"w-4 h-4 mr-2 text-gray-400"}),"Tag do Equipamento"]}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",placeholder:"Ex: MOTOR-01, TRAFO-02",value:F,onChange:e=>M(e.target.value)})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[s.jsx(v,{className:"w-4 h-4 mr-2 text-gray-400"}),"Operador Responsável"]}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",placeholder:"Nome do operador responsável",value:P,onChange:e=>$(e.target.value)})]})]})]}),s.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-8",children:[s.jsxs("div",{className:"flex items-center mb-8",children:[s.jsx("div",{className:"p-3 bg-indigo-500/20 rounded-xl mr-4",children:s.jsx(r,{className:"w-6 h-6 text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Configuração das Fases"}),s.jsx("p",{className:"text-gray-400",children:"Configure as fases e combinações do sistema"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 items-center",children:[s.jsx(a,{className:"w-4 h-4 mr-2 text-indigo-400"}),"Fases do Sistema"]}),s.jsxs("button",{type:"button",onClick:()=>{const e=`Fase${V.length+1}`;B([...V,e])},className:"text-indigo-400 hover:text-indigo-300 text-sm font-medium bg-indigo-500/20 px-3 py-2 rounded-lg hover:bg-indigo-500/30 transition-colors border border-indigo-500/30",children:[s.jsx(C,{className:"w-4 h-4 inline mr-1"}),"Adicionar Fase"]})]}),s.jsx("div",{className:"space-y-3",children:V.map((e,t)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"text",className:"flex-1 px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",value:e,onChange:e=>((e,s)=>{const t=V[e],a=[...V];a[e]=s,B(a);const r=H.map(e=>e.map(e=>e===t?s:e));J(r)})(t,e.target.value),placeholder:`Fase ${t+1}`}),V.length>2&&s.jsx("button",{type:"button",onClick:()=>(e=>{if(V.length<=2)return void alert("Deve ter pelo menos 2 fases");const s=V.filter((s,t)=>t!==e);B(s);const t=V[e],a=H.filter(e=>!e.includes(t));J(a)})(t),className:"p-3 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-xl transition-colors",children:s.jsx(A,{className:"w-5 h-5"})})]},t))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[s.jsx(v,{className:"w-4 h-4 mr-2 text-gray-400"}),"Nome da Massa/Terra"]}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",value:U,onChange:e=>_(e.target.value),placeholder:"Terra, PE, Massa"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 items-center",children:[s.jsx(a,{className:"w-4 h-4 mr-2 text-indigo-400"}),"Combinações Fase/Fase"]}),s.jsxs("button",{type:"button",onClick:()=>{if(V.length<2)return;const e=[V[0],V[1]];J([...H,e])},className:"text-indigo-400 hover:text-indigo-300 text-sm font-medium bg-indigo-500/20 px-3 py-2 rounded-lg hover:bg-indigo-500/30 transition-colors border border-indigo-500/30",children:[s.jsx(C,{className:"w-4 h-4 inline mr-1"}),"Adicionar Combinação"]})]}),s.jsx("div",{className:"space-y-3",children:H.map((e,t)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("select",{className:"flex-1 px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",value:e[0],onChange:e=>le(t,0,e.target.value),children:V.map(e=>s.jsx("option",{value:e,children:e},e))}),s.jsx("span",{className:"text-gray-400 font-bold text-lg",children:"×"}),s.jsx("select",{className:"flex-1 px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",value:e[1],onChange:e=>le(t,1,e.target.value),children:V.map(e=>s.jsx("option",{value:e,children:e},e))}),s.jsx("button",{type:"button",onClick:()=>(e=>{const s=H.filter((s,t)=>t!==e);J(s)})(t),className:"p-3 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-xl transition-colors",children:s.jsx(A,{className:"w-5 h-5"})})]},t))})]})]})]}),Z.length>0&&s.jsx("div",{className:"bg-red-500/10 border-2 border-red-500/30 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(b,{className:"w-6 h-6 text-red-400 mt-0.5 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-2",children:"Erros de Validação"}),s.jsx("ul",{className:"space-y-1 text-sm text-red-300",children:Z.map((e,t)=>s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full mr-2"}),e]},t))})]})]})}),s.jsx("button",{onClick:async()=>{Q([]);const e=[];if(F.trim()||e.push("Tag do equipamento é obrigatória"),P.trim()||e.push("Operador é obrigatório"),V.length<2&&e.push("Deve ter pelo menos 2 fases"),0===H.length&&e.push("Deve ter pelo menos uma combinação de fases"),e.length>0)Q(e);else try{c(!0);const e={id:crypto.randomUUID(),equipmentType:R,phases:{names:V},voltage:T,duration:O,intervals:[15,30,45,60],createdAt:new Date,updatedAt:new Date},s=await z(e,{equipmentTag:F,operator:P,phaseCombinations:H,groundName:U});W(s.report),Y(s.confidence),s.warnings&&s.warnings.length>0&&Q(s.warnings),await L.recordAILearning({id:Date.now(),category:R,phaseCount:V.length,phaseNames:V,input:JSON.stringify({equipmentType:R,voltage:T,phaseNames:V,combinations:H}),output:JSON.stringify(s),createdAt:(new Date).toISOString()})}catch(s){Q(["Erro interno ao gerar relatório multi-fase"])}finally{c(!1)}},disabled:o,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 px-6 rounded-xl hover:from-purple-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-purple-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"Gerando com IA..."]}):s.jsxs(s.Fragment,{children:[s.jsx(j,{className:"w-6 h-6 mr-3"}),"Gerar Relatório Multi-Fase"]})})]}),s.jsx("div",{className:"space-y-8",children:K?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-green-500/20 rounded-xl mr-4",children:s.jsx(p,{className:"w-6 h-6 text-green-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Relatório Gerado"}),s.jsx("p",{className:"text-gray-400",children:"Relatório multi-fase criado com sucesso"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("span",{className:"text-sm font-semibold text-gray-300",children:["Confiança IA: ",(100*X).toFixed(0),"%"]}),s.jsx("div",{className:"w-20 bg-gray-700 rounded-full h-3",children:s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full transition-all duration-500",style:{width:100*X+"%"}})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Equipamento:"}),s.jsx("span",{className:"ml-3 text-white bg-gray-700 px-3 py-1 rounded-lg text-sm font-medium",children:K.equipmentTag})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Operador:"}),s.jsx("span",{className:"ml-3 text-white bg-gray-700 px-3 py-1 rounded-lg text-sm font-medium",children:K.operator})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Fases:"}),s.jsx("span",{className:"ml-3 text-white bg-gray-700 px-3 py-1 rounded-lg text-sm font-medium",children:V.join(", ")})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Data/Hora:"}),s.jsx("span",{className:"ml-3 text-white bg-gray-700 px-3 py-1 rounded-lg text-sm font-medium",children:K.createdAt.toLocaleString("pt-BR")})]})]})]}),s.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-8",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"p-3 bg-blue-500/20 rounded-xl mr-4",children:s.jsx(l,{className:"w-6 h-6 text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Resumo dos Testes"}),s.jsx("p",{className:"text-gray-400",children:"Testes realizados no equipamento"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm font-semibold text-gray-300 border-b-2 border-gray-600 pb-3",children:[s.jsx("span",{children:"Teste"}),s.jsx("span",{children:"Leituras"}),s.jsx("span",{children:"Status"})]}),H.map((e,t)=>s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm py-3 border-b border-gray-700",children:[s.jsxs("span",{className:"font-semibold text-white",children:[e[0]," × ",e[1]]}),s.jsxs("span",{className:"text-gray-400",children:[K.readings?.filter(e=>e.phase===t).length||4," leituras"]}),s.jsxs("span",{className:"text-green-400 font-semibold flex items-center",children:[s.jsx(p,{className:"w-4 h-4 mr-1"}),"Completo"]})]},t)),V.map((e,t)=>s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm py-3 border-b border-gray-700",children:[s.jsxs("span",{className:"font-semibold text-white",children:[e," × ",U]}),s.jsx("span",{className:"text-gray-400",children:"4 leituras"}),s.jsxs("span",{className:"text-green-400 font-semibold flex items-center",children:[s.jsx(p,{className:"w-4 h-4 mr-1"}),"Completo"]})]},`ground-${t}`))]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[!K.isSaved&&s.jsx("button",{onClick:async()=>{if(K)try{u(!0);const e={...K,isSaved:!0};await L.saveMultiPhaseReport(e),W(e),re("success","Relatório multi-fase salvo com sucesso!")}catch(e){re("error","Erro ao salvar relatório")}finally{u(!1)}},disabled:x,className:"flex-1 py-3 px-6 rounded-xl focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold transition-all duration-200 hover:scale-[1.02] "+(K.isSaved?"bg-green-500/20 text-green-400 border-2 border-green-500/30":"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 focus:ring-green-500/50"),children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Salvando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(q,{className:"w-5 h-5 mr-2"}),"Salvar no Banco"]})}),s.jsx("button",{onClick:async()=>{if(K)try{w(!0);const e=await G(K),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`relatorio_multifase_${K.equipmentTag}_${(new Date).toISOString().split("T")[0]}.pdf`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)}catch(e){re("error","Erro ao exportar relatório")}finally{w(!1)}},disabled:N,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 px-6 rounded-xl hover:from-purple-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-purple-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold transition-all duration-200 hover:scale-[1.02]",children:N?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Exportando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(g,{className:"w-5 h-5 mr-2"}),"Exportar PDF"]})}),s.jsxs("button",{onClick:()=>{W(null),Q([]),Y(0)},className:"flex-1 bg-gray-700 text-gray-200 py-3 px-6 rounded-xl hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 flex items-center justify-center font-semibold transition-all duration-200 hover:scale-[1.02]",children:[s.jsx(C,{className:"w-5 h-5 mr-2"}),"Gerar Novo"]})]})]}):s.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-12 text-center",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-500/20 to-indigo-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(r,{className:"w-12 h-12 text-purple-400"})}),s.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Relatório Multi-Fase"}),s.jsx("p",{className:"text-gray-400 mb-6 max-w-md mx-auto",children:"Configure as fases e combinações do seu equipamento e gere um relatório completo com IA"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-400 max-w-lg mx-auto",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(p,{className:"w-4 h-4 mr-2 text-green-400"}),"Testes fase × fase automatizados"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(p,{className:"w-4 h-4 mr-2 text-green-400"}),"Testes fase × massa correlacionados"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(p,{className:"w-4 h-4 mr-2 text-green-400"}),"Análise de consistência com IA"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(p,{className:"w-4 h-4 mr-2 text-green-400"}),"Exportação profissional em PDF"]})]})]})})]})})]})},xe=()=>{const[e,t]=d.useState([]),[a,i]=d.useState(!0),[n,c]=d.useState(""),[m,x]=d.useState("all");d.useEffect(()=>{h()},[]);const h=async()=>{try{i(!0);const s=await L.getAllIRReports(),a=await L.getMultiPhaseReports();let r=[...s.map(e=>({id:e.id,type:"ir",title:`${e.category||"Sem Categoria"} - ${e.tag||"Sem Tag"}`,createdAt:e.createdAt,equipment:e.tag,category:e.category,isSaved:e.isSaved})),...a.map(e=>({id:e.id,type:"multi",title:`Multi-Fase - ${e.equipment?.model||"Sem Modelo"}`,createdAt:e.createdAt,equipment:e.equipment?.model,category:"Multi-Fase",isSaved:!0}))];if(P.isEnabled())try{const e=(await P.getRecentReports(P.getUserId(),50)).map(e=>({id:e.id,type:e.type,title:"ir"===e.type?`${e.category||"Sem Categoria"} - ${e.equipment||"Sem Equipamento"}`:`Multi-Fase - ${e.equipment?.model||"Sem Modelo"}`,createdAt:e.createdAt?.toDate?.()||new Date(e.createdAt),equipment:"ir"===e.type?e.equipment:e.equipment?.model,category:"ir"===e.type?e.category:"Multi-Fase",isSaved:!0})),s=[...r,...e];r=s.filter((e,s,t)=>s===t.findIndex(s=>s.id===e.id))}catch(e){}r.sort((e,s)=>s.createdAt.getTime()-e.createdAt.getTime()),t(r)}catch(e){}finally{i(!1)}},p=e.filter(e=>{const s=e.title.toLowerCase().includes(n.toLowerCase())||e.equipment?.toLowerCase().includes(n.toLowerCase())||e.category?.toLowerCase().includes(n.toLowerCase()),t="all"===m||e.type===m;return s&&t});return a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Relatórios"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Visualize e gerencie todos os relatórios salvos"})]}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"text-sm text-gray-400",children:[p.length," de ",e.length," relatórios"]})})]}),s.jsx("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar por equipamento, categoria...",value:n,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("select",{value:m,onChange:e=>x(e.target.value),className:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"Todos os tipos"}),s.jsx("option",{value:"ir",children:"Relatórios IR"}),s.jsx("option",{value:"multi",children:"Multi-Fase"})]})]})}),s.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:0===p.length?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(l,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"Nenhum relatório encontrado"}),s.jsx("p",{className:"text-gray-500",children:n||"all"!==m?"Tente ajustar os filtros de busca":"Crie seu primeiro relatório para começar"})]}):s.jsx("div",{className:"divide-y divide-gray-700",children:p.map(e=>{return s.jsx("div",{className:"p-6 hover:bg-gray-700 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 rounded-lg "+("ir"===e.type?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400"),children:"ir"===e.type?s.jsx(l,{className:"w-6 h-6"}):s.jsx(r,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-white",children:e.title}),s.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-400",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(E,{className:"w-4 h-4"}),s.jsx("span",{children:(t=e.createdAt,t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),e.equipment&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(T,{className:"w-4 h-4"}),s.jsx("span",{children:e.equipment})]}),e.isSaved&&s.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs",children:"Salvo"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(o,{to:`/report/${e.type}/${e.id}`,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",title:"Visualizar",children:s.jsx(u,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>(async e=>{try{if("ir"===e.type){const s=await L.getIRReport(e.id);s&&await _(s)}else{const s=await L.getMultiPhaseReport(e.id);s&&await H(s)}}catch(s){alert("Erro ao exportar relatório")}})(e),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",title:"Exportar",children:s.jsx(g,{className:"w-5 h-5"})})]})]})},e.id);var t})})})]})};function ue(){return s.jsx(I,{children:s.jsx(J,{children:s.jsxs(O,{children:[s.jsx(D,{path:"/",element:s.jsx(K,{})}),s.jsx(D,{path:"/generate",element:s.jsx(X,{})}),s.jsx(D,{path:"/new",element:s.jsx(ie,{})}),s.jsx(D,{path:"/report/:type/:id",element:s.jsx(ne,{})}),s.jsx(D,{path:"/equipment",element:s.jsx(oe,{})}),s.jsx(D,{path:"/parameters",element:s.jsx(de,{})}),s.jsx(D,{path:"/multiphase",element:s.jsx(me,{})}),s.jsx(D,{path:"/reports",element:s.jsx(xe,{})})]})})})}const ge=document.getElementById("root");if(!ge)throw new Error("Elemento root não encontrado");F.createRoot(ge).render(s.jsx(M.StrictMode,{children:s.jsx(ue,{})})),$().then(()=>{}).catch(e=>{});
