const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AIInsights-D9bL7V44.js","assets/react-vendor-Dpq2nYKP.js","assets/vendor-BOlVnSuY.js","assets/pdf-vendor-Duu-vOQv.js","assets/ai-engine-8WJZWTWf.js","assets/db-vendor-CG99BKJT.js","assets/firebase-vendor-DTLxk9EJ.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./vendor-BOlVnSuY.js";import{u as s,j as t,F as a,a as r,b as l,c as i,d as n,e as o,L as d,r as c,f as m,g as x,h as u,i as g,k as h,l as p,m as b,n as f,o as y,p as j,q as v,s as N,t as w,v as C,w as k,x as S,y as R,z as A,A as q,B as E,C as T,D as I,E as D,R as O,G as F,H as M,I as L}from"./react-vendor-Dpq2nYKP.js";import{d as P,c as $}from"./ai-engine-8WJZWTWf.js";import{g as V,a as z}from"./generator-C-ck0WR9.js";import{e as B,a as U,b as G,c as _}from"./export-DpdO-Alc.js";import"./pdf-vendor-Duu-vOQv.js";import"./db-vendor-CG99BKJT.js";import"./firebase-vendor-DTLxk9EJ.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const H=({children:e})=>{const c=s(),m=[{path:"/",label:"Dashboard",icon:a},{path:"/generate",label:"Gerar Rápido",icon:r},{path:"/multiphase",label:"Gerar Multi-Fase",icon:l},{path:"/reports",label:"Relatórios",icon:i},{path:"/parameters",label:"Parâmetros",icon:n},{path:"/equipment",label:"Equipamentos",icon:o}];return t.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[t.jsx("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-gray-800 shadow-xl",children:t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsx("div",{className:"flex items-center justify-center h-16 px-4 border-b border-gray-700",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),t.jsx("span",{className:"text-xl font-bold text-white",children:"EletriLab"})]})}),t.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:m.map(e=>{const s=e.icon,a=c.pathname===e.path;return t.jsxs(d,{to:e.path,className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 "+(a?"bg-blue-600 text-white shadow-lg":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:[t.jsx(s,{className:"w-5 h-5"}),t.jsx("span",{className:"font-medium",children:e.label})]},e.path)})}),t.jsx("div",{className:"p-4 border-t border-gray-700",children:t.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),t.jsx("span",{className:"text-sm font-medium",children:"IA Ativa"})]})})]})}),t.jsx("div",{className:"ml-64 bg-gray-900 min-h-screen",children:t.jsx("main",{className:"p-6",children:e})})]})},J=()=>{const[e,s]=c.useState({totalReports:0,totalEquipment:0,totalTests:0,savedToday:0,multiPhase:0,aiLearning:0,resultsDistribution:{BOM:0,"ACEITÁVEL":0,REPROVADO:0},categoryDistribution:{motor:0,painel:0,cabo:0,megger:0,outros:0},recentReports:[],recentTests:[]}),[a,o]=c.useState(!0);c.useEffect(()=>{p()},[]);const p=async()=>{try{o(!0);const e=await P.getDashboardStats();if($.isEnabled())try{const t=await $.getRecentReports($.getUserId(),5);t.length>0?s({...e,recentReports:t}):s(e)}catch{s(e)}else s(e)}catch(e){}finally{o(!1)}},b=e=>"reports"in e&&e.reports?`${e.reports.length} Fases - ${e.reports[0]?.id||"N/A"}`:`${e.category.toUpperCase()} - ${e.tag||"Sem Tag"}`,f=e=>"reports"in e?t.jsx(l,{className:"w-4 h-4"}):t.jsx(i,{className:"w-4 h-4"});return a?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold text-white",children:"EletriLab"}),t.jsx("p",{className:"text-gray-400 mt-2 text-lg",children:"Gerador de Relatórios Megger/IR com IA"})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),t.jsx("span",{className:"text-sm font-medium",children:"IA Ativa"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm",children:"Total Relatórios"}),t.jsx("p",{className:"text-2xl font-bold text-white",children:e.totalReports})]}),t.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:t.jsx(i,{className:"w-6 h-6 text-blue-400"})})]})}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm",children:"Salvos Hoje"}),t.jsx("p",{className:"text-2xl font-bold text-white",children:e.savedToday})]}),t.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:t.jsx(m,{className:"w-6 h-6 text-green-400"})})]})}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm",children:"Multi-Fase"}),t.jsx("p",{className:"text-2xl font-bold text-white",children:e.multiPhase})]}),t.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:t.jsx(l,{className:"w-6 h-6 text-purple-400"})})]})}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm",children:"IA Aprendendo"}),t.jsx("p",{className:"text-2xl font-bold text-white",children:e.aiLearning})]}),t.jsx("div",{className:"p-3 bg-orange-500/20 rounded-lg",children:t.jsx(x,{className:"w-6 h-6 text-orange-400"})})]})})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[t.jsx(r,{className:"w-6 h-6 text-yellow-400"}),t.jsx("h2",{className:"text-xl font-semibold text-white",children:"Ações Rápidas"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx(d,{to:"/generate",className:"p-6 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors border border-gray-600",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:t.jsx(i,{className:"w-6 h-6 text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-white",children:"Gerar Rápido"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Relatório único sem salvar"})]})]})}),t.jsx(d,{to:"/multiphase",className:"p-6 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors border border-gray-600",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:t.jsx(l,{className:"w-6 h-6 text-purple-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-white",children:"Gerar Multi-Fase"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Múltiplos relatórios com IA"})]})]})}),t.jsx(d,{to:"/parameters",className:"p-6 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors border border-gray-600",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-gray-500/20 rounded-lg",children:t.jsx(n,{className:"w-6 h-6 text-gray-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-white",children:"Parâmetros"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Configurar perfis e IA"})]})]})})]})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(u,{className:"w-6 h-6 text-blue-400"}),t.jsx("h2",{className:"text-xl font-semibold text-white",children:"Relatórios Recentes"})]}),t.jsx(d,{to:"/reports",className:"text-blue-400 hover:text-blue-300 text-sm font-medium",children:"Ver todos →"})]}),0===e.recentReports.length?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(i,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-400",children:"Nenhum relatório recente"})]}):t.jsx("div",{className:"space-y-4",children:e.recentReports.slice(0,5).map(e=>{return t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg border border-gray-600",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"p-2 rounded-lg "+("multi"===e.type||e.reports?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"),children:f(e)}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-white",children:b(e)}),t.jsx("p",{className:"text-sm text-gray-400",children:(s=e.createdAt,("string"==typeof s?new Date(s):s).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}))})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[e.isSaved&&t.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs",children:"Salvo"}),t.jsx(d,{to:`/report/${e.type||"ir"}/${e.id}`,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded-lg transition-colors",title:"Visualizar",children:t.jsx(g,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>(async()=>{})(),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded-lg transition-colors",title:"Exportar",children:t.jsx(h,{className:"w-5 h-5"})})]})]},e.id);var s})})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[t.jsx(x,{className:"w-6 h-6 text-orange-400"}),t.jsx("h2",{className:"text-xl font-semibold text-white",children:"Estatísticas de IA"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:"94%"}),t.jsx("p",{className:"text-gray-400",children:"Precisão Geral"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:"89%"}),t.jsx("p",{className:"text-gray-400",children:"Aprendizado"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:"92%"}),t.jsx("p",{className:"text-gray-400",children:"Eficiência"})]})]})]})]})};function K(e){const s=[];if(e.category){const t=function(e){const s=["cabo","motor","bomba","trafo","outro"];return{isValid:s.includes(e),errors:s.includes(e)?[]:[{field:"category",message:"Categoria deve ser: cabo, motor, bomba, trafo, outro",type:"required"}]}}(e.category);s.push(...t.errors)}else s.push({field:"category",message:"Categoria é obrigatória",type:"required"});if(void 0!==e.kv){const t=function(e){const s=[];return"number"!=typeof e||isNaN(e)?s.push({field:"kv",message:"Tensão deve ser um número válido",type:"format"}):(e<.1||e>50)&&s.push({field:"kv",message:"Tensão deve estar entre 0.1 e 50 kV",type:"range"}),{isValid:0===s.length,errors:s}}(e.kv);s.push(...t.errors)}if(e.tag){const t=function(e){if(!e)return{isValid:!0,errors:[]};const s=[];return e.length>50&&s.push({field:"tag",message:"Tag deve ter no máximo 50 caracteres",type:"format"}),/^[a-zA-Z0-9\-\_\s]+$/.test(e)||s.push({field:"tag",message:"Tag deve conter apenas letras, números, hífens e underscores",type:"format"}),{isValid:0===s.length,errors:s}}(e.tag);s.push(...t.errors)}return{isValid:0===s.length,errors:s}}function W(){return{ok:!0,errors:[]}}function Z(e){if(!e)return"";return("string"==typeof e?new Date(e):e).toLocaleDateString("pt-BR")}c.lazy(()=>e(()=>import("./AIInsights-D9bL7V44.js"),__vite__mapDeps([0,1,2,3])));const Q=()=>{const e=p(),[s,a]=c.useState(!1),[l,o]=c.useState(!1),[d,m]=c.useState(!1),[u,g]=c.useState(!1),[k,S]=c.useState(null),[R,A]=c.useState({category:"cabo",kv:1,limitTOhm:5,tag:"",client:"",site:"",operator:"",manufacturer:"",model:""}),[q,E]=c.useState(null),[T,I]=c.useState([]),[D,O]=c.useState({});c.useEffect(()=>{F()},[]),c.useEffect(()=>{if(k){const e=setTimeout(()=>{S(null)},5e3);return()=>clearTimeout(e)}},[k]);const F=async()=>{try{const e=await P.getSystemConfig();e&&A(s=>({...s,operator:e.defaultOperator||"",client:e.defaultClient||"",site:e.defaultSite||""}))}catch(e){}},M=(e,s)=>{A(t=>({...t,[e]:s})),T.length>0&&I([]),D[e]&&O(s=>{const t={...s};return delete t[e],t})},L=(e,s)=>{switch(e){case"kv":if(s<.1||s>10)return"Tensão deve estar entre 0.1 e 10 kV";break;case"tag":if(s&&s.length>50)return"Tag deve ter no máximo 50 caracteres";break;case"client":case"site":case"operator":if(s&&s.length>100)return"Campo deve ter no máximo 100 caracteres"}return null},$=async()=>{try{o(!0),I([]);const e=K({category:R.category,kv:R.kv,readings:[],dai:""});if(!e.isValid)return void I(e.errors.map(e=>e.message));const s=await V(R),t={id:`ir_${Date.now()}`,category:R.category,tag:R.tag||void 0,kv:R.kv,client:R.client||void 0,site:R.site||void 0,operator:R.operator||void 0,manufacturer:R.manufacturer||void 0,model:R.model||void 0,readings:s.readings,dai:s.dai,createdAt:new Date,isSaved:!1};E(t),await P.recordAILearning({id:Date.now(),category:R.category,phaseCount:1,input:JSON.stringify(R),output:JSON.stringify(s),createdAt:(new Date).toISOString()})}catch(e){I(["Erro interno ao gerar relatório"])}finally{o(!1)}};return t.jsxs("div",{className:"min-h-screen bg-gray-900",children:[k&&t.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-right",children:t.jsxs("div",{className:"flex items-center p-4 rounded-lg shadow-lg "+("success"===k.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:["success"===k.type?t.jsx(b,{className:"w-5 h-5 mr-2"}):t.jsx(f,{className:"w-5 h-5 mr-2"}),t.jsx("span",{className:"font-medium",children:k.message}),t.jsx("button",{onClick:()=>S(null),className:"ml-4 text-gray-400 hover:text-gray-600",children:t.jsx(y,{className:"w-4 h-4"})})]})}),t.jsx("div",{className:"pt-4",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"bg-gray-800/70 border border-gray-700 rounded-2xl shadow-xl px-5 sm:px-8 py-6 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx("button",{onClick:()=>e("/"),className:"mr-4 mt-1 p-2 text-gray-400 hover:text-gray-200 transition-colors rounded-lg hover:bg-gray-700","aria-label":"Voltar",children:t.jsx(j,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-extrabold tracking-tight bg-gradient-to-r from-blue-400 via-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"Gerar Relatório Rápido"}),t.jsxs("p",{className:"text-gray-400 mt-1 flex items-center",children:[t.jsx(v,{className:"w-4 h-4 mr-1 text-blue-400"}),"Geração instantânea com IA"]})]})]}),t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{className:"flex items-center text-sm text-gray-200 bg-blue-500/15 px-4 py-2 rounded-full border border-blue-500/30 shadow-inner",children:[t.jsx("span",{className:"relative mr-2 block w-2 h-2 rounded-full bg-blue-400",children:t.jsx("span",{className:"absolute inset-0 rounded-full bg-blue-400 animate-ping opacity-60"})}),t.jsx(x,{className:"w-4 h-4 mr-1 text-blue-400"}),t.jsx("span",{className:"font-medium",children:"IA Ativa"})]})})]})})}),t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-8",children:[t.jsxs("div",{className:"flex items-center mb-8",children:[t.jsx("div",{className:"p-3 bg-blue-500/20 rounded-xl mr-4",children:t.jsx(n,{className:"w-6 h-6 text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Configurações"}),t.jsx("p",{className:"text-gray-400",children:"Configure os parâmetros do teste"})]})]}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-4 items-center",children:[t.jsx(r,{className:"w-4 h-4 mr-2 text-blue-400"}),"Categoria do Equipamento *"]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[{value:"cabo",label:"Cabo",description:"Cabos de potência e controle"},{value:"motor",label:"Motor",description:"Motores elétricos"},{value:"bomba",label:"Bomba",description:"Bombas e sistemas hidráulicos"},{value:"trafo",label:"Transformador",description:"Transformadores de potência"},{value:"outro",label:"Outro",description:"Outros equipamentos"}].map(e=>t.jsxs("label",{className:"group relative flex flex-col justify-center text-center aspect-square p-4 border-2 rounded-2xl cursor-pointer transition-all duration-200 "+(R.category===e.value?"border-blue-500 bg-blue-500/20 shadow-lg scale-[1.02]":"border-gray-600 bg-gray-800 hover:border-blue-400 hover:bg-gray-700 hover:shadow-md"),children:[t.jsx("input",{type:"radio",name:"category",value:e.value,checked:R.category===e.value,onChange:e=>M("category",e.target.value),className:"sr-only"}),t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"font-semibold text-white group-hover:text-blue-300",children:e.label}),t.jsx("div",{className:"text-sm text-gray-200 mt-1 group-hover:text-blue-300",children:e.description})]}),R.category===e.value&&t.jsx("div",{className:"absolute top-3 right-3 p-2 bg-blue-500 rounded-full",children:t.jsx(b,{className:"w-5 h-5 text-white"})})]},e.value))})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[t.jsx(r,{className:"w-4 h-4 mr-2 text-blue-400"}),"Tensão Aplicada (kV)"]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",step:"0.01",min:"0.1",max:"10",value:R.kv,onChange:e=>{const s=parseFloat(e.target.value)||1;M("kv",s);const t=L("kv",s);t&&O(e=>({...e,kv:t}))},className:"w-full px-4 py-3 bg-gray-700 border-2 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all "+(D.kv?"border-red-400 bg-red-500/10":"border-gray-600 focus:border-blue-500"),placeholder:"1.00"}),D.kv&&t.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[t.jsx(f,{className:"w-4 h-4 mr-1"}),D.kv]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("label",{className:"flex text-sm font-semibold text-white mb-3 items-center",children:[t.jsx(N,{className:"w-4 h-4 mr-2 text-blue-400"}),"Tag do Equipamento",t.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(Opcional)"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:R.tag,onChange:e=>{M("tag",e.target.value);const s=L("tag",e.target.value);s&&O(e=>({...e,tag:s}))},placeholder:"Ex: MOTOR-01, TRAFO-02",className:"w-full px-4 py-3 bg-gray-700 border-2 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all "+(D.tag?"border-red-400 bg-red-500/10":"border-gray-600 focus:border-blue-500")}),D.tag&&t.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[t.jsx(f,{className:"w-4 h-4 mr-1"}),D.tag]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-white mb-3",children:"Cliente"}),t.jsx("input",{type:"text",value:R.client,onChange:e=>{M("client",e.target.value);const s=L("client",e.target.value);s&&O(e=>({...e,client:s}))},placeholder:"Nome do cliente",className:"w-full px-4 py-3 bg-gray-700 border-2 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all "+(D.client?"border-red-400 bg-red-500/10":"border-gray-600 focus:border-blue-500")}),D.client&&t.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[t.jsx(f,{className:"w-4 h-4 mr-1"}),D.client]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-white mb-3",children:"Local do Teste"}),t.jsx("input",{type:"text",value:R.site,onChange:e=>{M("site",e.target.value);const s=L("site",e.target.value);s&&O(e=>({...e,site:s}))},placeholder:"Local onde será realizado o teste",className:"w-full px-4 py-3 bg-gray-700 border-2 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all "+(D.site?"border-red-400 bg-red-500/10":"border-gray-600 focus:border-blue-500")}),D.site&&t.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[t.jsx(f,{className:"w-4 h-4 mr-1"}),D.site]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-white mb-3",children:"Operador Responsável"}),t.jsx("input",{type:"text",value:R.operator,onChange:e=>{M("operator",e.target.value);const s=L("operator",e.target.value);s&&O(e=>({...e,operator:s}))},placeholder:"Nome do operador responsável",className:"w-full px-4 py-3 bg-gray-700 border-2 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all "+(D.operator?"border-red-400 bg-red-500/10":"border-gray-600 focus:border-blue-500")}),D.operator&&t.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[t.jsx(f,{className:"w-4 h-4 mr-1"}),D.operator]})]})]}),t.jsx("button",{onClick:$,disabled:l,className:"w-full mt-8 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",children:l?t.jsxs(t.Fragment,{children:[t.jsx(w,{className:"w-6 h-6 mr-3 animate-spin"}),"Gerando com IA..."]}):t.jsxs(t.Fragment,{children:[t.jsx(v,{className:"w-6 h-6 mr-3"}),"Gerar Relatório com IA"]})})]}),t.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-8",children:[t.jsxs("div",{className:"flex items-center mb-8",children:[t.jsx("div",{className:"p-3 bg-green-500/20 rounded-xl mr-4",children:t.jsx(i,{className:"w-6 h-6 text-green-400"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Preview do Relatório"}),t.jsx("p",{className:"text-gray-400",children:"Visualização em tempo real"})]})]}),T.length>0&&t.jsx("div",{className:"mb-6 p-6 bg-red-50 border-2 border-red-200 rounded-xl",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(f,{className:"w-6 h-6 text-red-500 mr-3 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erros encontrados:"}),t.jsx("ul",{className:"space-y-1 text-sm text-red-700",children:T.map((e,s)=>t.jsxs("li",{className:"flex items-center",children:[t.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-2"}),e]},s))})]})]})}),q?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[t.jsx(N,{className:"w-5 h-5 mr-2 text-blue-400"}),"Informações do Relatório"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Categoria:"}),t.jsx("span",{className:"ml-3 capitalize bg-gray-700 text-white px-3 py-1 rounded-lg text-sm font-medium",children:q.category})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Tensão:"}),t.jsxs("span",{className:"ml-3 bg-gray-700 text-white px-3 py-1 rounded-lg text-sm font-medium",children:[q.kv," kV"]})]}),q.tag&&t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Tag:"}),t.jsx("span",{className:"ml-3 bg-gray-700 text-white px-3 py-1 rounded-lg text-sm font-medium",children:q.tag})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"DAI:"}),t.jsx("span",{className:"ml-3 bg-blue-500/20 text-blue-300 px-3 py-1 rounded-lg text-sm font-semibold",children:q.dai})]})]})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[t.jsx(r,{className:"w-5 h-5 mr-2 text-green-400"}),"Série de Leituras IR"]}),t.jsx("div",{className:"border-2 border-gray-700 rounded-xl overflow-hidden shadow-sm",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-200 uppercase tracking-wider",children:"Tempo"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-200 uppercase tracking-wider",children:"Tensão (kV)"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-200 uppercase tracking-wider",children:"Resistência"})]})}),t.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:q.readings.map((e,s)=>t.jsxs("tr",{className:"hover:bg-gray-700 transition-colors",children:[t.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-200",children:e.time}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-200",children:e.kv}),t.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-200",children:e.resistance})]},s))})]})})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[t.jsxs("button",{onClick:()=>{E(null),$()},disabled:l,className:"flex-1 bg-gray-700 text-gray-200 py-3 px-6 rounded-xl hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold transition-all duration-200 hover:scale-[1.02]",children:[t.jsx(w,{className:"w-5 h-5 mr-2"}),"Regenerar"]}),t.jsx("button",{onClick:async()=>{if(q)try{m(!0);const e=await P.getNextReportNumber(),s={...q,number:e,isSaved:!0};await P.saveIRReport(s),E(s),S({type:"success",message:"Relatório salvo com sucesso!"})}catch(e){I(["Erro ao salvar relatório"])}finally{m(!1)}},disabled:d||q.isSaved,className:"flex-1 py-3 px-6 rounded-xl focus:outline-none focus:ring-4 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold transition-all duration-200 hover:scale-[1.02] "+(q.isSaved?"bg-green-100 text-green-700 border-2 border-green-300":"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 focus:ring-green-300"),children:d?t.jsxs(t.Fragment,{children:[t.jsx(w,{className:"w-5 h-5 mr-2 animate-spin"}),"Salvando..."]}):t.jsxs(t.Fragment,{children:[t.jsx(C,{className:"w-5 h-5 mr-2"}),q.isSaved?"✓ Salvo":"Salvar no Banco"]})}),t.jsx("button",{onClick:async()=>{if(q)try{g(!0);const e=await B(q),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`relatorio_ir_${q.category}_${(new Date).toISOString().split("T")[0]}.pdf`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)}catch(e){I(["Erro ao exportar relatório"])}finally{g(!1)}},disabled:u,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold transition-all duration-200 hover:scale-[1.02]",children:u?t.jsxs(t.Fragment,{children:[t.jsx(w,{className:"w-5 h-5 mr-2 animate-spin"}),"Exportando..."]}):t.jsxs(t.Fragment,{children:[t.jsx(h,{className:"w-5 h-5 mr-2"}),"Exportar PDF"]})})]})]}):t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500/20 to-indigo-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(i,{className:"w-12 h-12 text-blue-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Nenhum relatório gerado"}),t.jsx("p",{className:"text-gray-300 mb-4",children:'Configure os parâmetros e clique em "Gerar Relatório com IA"'}),t.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-400",children:[t.jsx(v,{className:"w-4 h-4 mr-2"}),t.jsx("span",{children:"A IA irá gerar dados realistas automaticamente"})]})]})]})]})})]})};function X(e){return{id:parseInt(e.id)||0,name:e.tag,category:e.category,manufacturer:e.manufacturer,model:e.model,tag:e.tag,calibrationDue:e.lastMaintenance,nextCalibration:e.installationDate}}function Y(e){return{id:parseInt(e.id)||0,reportId:parseInt(e.reportId)||0,type:e.testType,value:e.value,unit:e.unit,classification:e.result,measuredAt:e.performedAt}}async function ee(){try{return(await P.getAllEquipment()).map(X)}catch(e){return[]}}async function se(){try{return await P.getConfiguration()}catch(e){return{}}}async function te(e){try{const s={reportId:String(e.reportId),equipmentId:String(e.reportId),testType:"megger",value:e.value,unit:e.unit,result:"BOM",limits:{min:0,good:100,unit:e.unit},notes:"",performedBy:"",performedAt:e.measuredAt},t=await P.addTest(s);return{id:parseInt(t)||Math.random()}}catch(s){return{id:Math.random()}}}async function ae(e){try{const s=await P.getReportById(String(e));return s?function(e){return{id:e.id,createdAt:new Date(e.createdAt),category:"cabo",kv:1,readings:[],dai:"Undefined",isSaved:!1,operator:e.responsible,site:e.location,client:e.client,notes:e.observations}}(s):void 0}catch(s){return}}async function re(e){try{return(await P.getTestsByReportId(String(e))).map(Y)}catch(s){return[]}}function le(){const e=p(),[s,a]=c.useState(!1),[l,i]=c.useState([]),[n,o]=c.useState([]),[d,m]=c.useState({number:"",date:(new Date).toISOString().split("T")[0],client:"",location:"",responsible:"",observations:"",recommendations:""});c.useEffect(()=>{x()},[]);const x=async()=>{try{const e=await ee();i(e)}catch(e){}},u=(e,s,t)=>{const a=[...n];a[e]={...a[e],[s]:t},"testType"===s&&(a[e].unit="megger"===t?"MΩ":"V",a[e].value=0,a[e].result=""),o(a)},g=async e=>{const s=n[e];if(!s.equipmentId)return;if(l.find(e=>String(e.id)===String(s.equipmentId)))try{await se();const s=function(e=1,s=10){return Math.random()*(s-e)+e}(),t=s>=1e6?"OK":"ALERTA";u(e,"value",s),u(e,"result",t)}catch(t){}};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Novo Relatório"})}),t.jsxs("form",{onSubmit:async s=>{s.preventDefault();try{a(!0);const s=K(d);if(!s.isValid)return void alert("Erro de validação no relatório: "+s.errors.map(e=>e.message).join(", "));for(let e=0;e<n.length;e++){W().ok}const t=await async function(e){try{const s={number:String(e.id||Math.random()),date:e.createdAt.toISOString(),client:e.client||"",location:e.site||"",responsible:e.operator||"",status:"rascunho",tests:[],observations:e.notes||"",recommendations:"",attachments:[]},t=await P.addReport(s);return{id:parseInt(t)||Math.random()}}catch(s){return{id:Math.random()}}}({id:crypto.randomUUID(),category:"cabo",kv:1,readings:[],dai:"Undefined",isSaved:!1,createdAt:new Date,...d,status:"rascunho"});await se();for(const e of n){l.find(s=>String(s.id)===String(e.equipmentId))&&await te({reportId:Number(t.id),equipmentId:e.equipmentId,type:e.testType,value:e.value,unit:e.unit,classification:"OK",measuredAt:e.performedAt})}e(`/report/${t}`)}catch(t){alert("Erro ao salvar relatório")}finally{a(!1)}},className:"space-y-8",children:[t.jsxs("div",{className:"card p-6",children:[t.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Informações do Relatório"}),t.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Número do Relatório"}),t.jsx("input",{type:"text",className:"input",value:d.number,onChange:e=>m({...d,number:e.target.value}),required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Data"}),t.jsx("input",{type:"date",className:"input",value:d.date,onChange:e=>m({...d,date:e.target.value}),required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Cliente"}),t.jsx("input",{type:"text",className:"input",value:d.client,onChange:e=>m({...d,client:e.target.value}),required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Local"}),t.jsx("input",{type:"text",className:"input",value:d.location,onChange:e=>m({...d,location:e.target.value}),required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Responsável"}),t.jsx("input",{type:"text",className:"input",value:d.responsible,onChange:e=>m({...d,responsible:e.target.value}),required:!0})]})]})]}),t.jsxs("div",{className:"card p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Testes"}),t.jsxs("button",{type:"button",onClick:()=>{const e={equipmentId:"",testType:"IR",value:0,unit:"MΩ",result:"",notes:"",performedBy:"",performedAt:(new Date).toISOString().split("T")[0]};o([...n,e])},className:"btn-primary",children:[t.jsx(k,{className:"h-4 w-4 mr-2"}),"Adicionar Teste"]})]}),0===n.length?t.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:'Nenhum teste adicionado. Clique em "Adicionar Teste" para começar.'}):t.jsx("div",{className:"space-y-6",children:n.map((e,s)=>t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"text-md font-medium text-gray-900 dark:text-white",children:["Teste ",s+1]}),t.jsx("button",{type:"button",onClick:()=>(e=>{o(n.filter((s,t)=>t!==e))})(s),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:t.jsx(y,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Equipamento"}),t.jsxs("select",{className:"input",value:e.equipmentId,onChange:e=>u(s,"equipmentId",e.target.value),required:!0,children:[t.jsx("option",{value:"",children:"Selecione um equipamento"}),l.map(e=>t.jsxs("option",{value:e.id,children:[e.tag," - ",e.description]},e.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Tipo de Teste"}),t.jsxs("select",{className:"input",value:e.testType,onChange:e=>u(s,"testType",e.target.value),required:!0,children:[t.jsx("option",{value:"megger",children:"Megger"}),t.jsx("option",{value:"hipot",children:"Hipot"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Valor"}),t.jsxs("div",{className:"flex",children:[t.jsx("input",{type:"number",step:"0.1",className:"input rounded-r-none",value:e.value,onChange:e=>u(s,"value",parseFloat(e.target.value)||0),required:!0}),t.jsx("button",{type:"button",onClick:()=>g(s),className:"px-3 py-2 bg-gray-100 dark:bg-gray-700 border border-l-0 border-gray-300 dark:border-gray-600 rounded-r-lg hover:bg-gray-200 dark:hover:bg-gray-600",title:"Gerar valor aleatório",children:t.jsx(r,{className:"h-4 w-4"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Unidade"}),t.jsx("input",{type:"text",className:"input",value:e.unit,readOnly:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Resultado"}),t.jsx("input",{type:"text",className:"input",value:e.result,readOnly:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Data do Teste"}),t.jsx("input",{type:"date",className:"input",value:e.performedAt,onChange:e=>u(s,"performedAt",e.target.value),required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Responsável pelo Teste"}),t.jsx("input",{type:"text",className:"input",value:e.performedBy,onChange:e=>u(s,"performedBy",e.target.value),required:!0})]}),t.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[t.jsx("label",{className:"label",children:"Observações"}),t.jsx("textarea",{className:"input",rows:2,value:e.notes,onChange:e=>u(s,"notes",e.target.value)})]})]})]},s))})]}),t.jsxs("div",{className:"card p-6",children:[t.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Observações e Recomendações"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Observações"}),t.jsx("textarea",{className:"input",rows:4,value:d.observations,onChange:e=>m({...d,observations:e.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Recomendações"}),t.jsx("textarea",{className:"input",rows:4,value:d.recommendations,onChange:e=>m({...d,recommendations:e.target.value})})]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-4",children:[t.jsx("button",{type:"button",onClick:()=>e("/"),className:"btn-secondary",children:"Cancelar"}),t.jsxs("button",{type:"submit",disabled:s,className:"btn-primary",children:[s?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):t.jsx(C,{className:"h-4 w-4 mr-2"}),"Salvar Relatório"]})]})]})]})}function ie(){const{id:e}=S(),[s,a]=c.useState(null),[r,l]=c.useState([]),[i,n]=c.useState([]),[o,d]=c.useState(!0);c.useEffect(()=>{e&&m(e)},[e]);const m=async e=>{try{d(!0);const[s,t,r]=await Promise.all([ae(e),re(e),ee()]);s&&(a(s),l(t),n(r))}catch(s){}finally{d(!1)}};return o?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("button",{onClick:()=>window.history.back(),className:"btn-secondary",children:[t.jsx(j,{className:"h-4 w-4 mr-2"}),"Voltar"]}),t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Relatório ",s.number]})]}),t.jsxs("button",{onClick:()=>{},className:"btn-primary",children:[t.jsx(h,{className:"h-4 w-4 mr-2"}),"Exportar PDF"]})]}),t.jsxs("div",{className:"card p-6",children:[t.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Informações do Relatório"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Número"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:s.number})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Data"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:Z(s.date||s.createdAt)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Cliente"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:s.client})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Local"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:s.location||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Responsável"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:s.responsible||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),t.jsx("span",{className:`\n              badge\n              ${"aprovado"===s.status?"badge-success":""}\n              ${"reprovado"===s.status?"badge-danger":""}\n              ${"finalizado"===s.status?"badge-info":""}\n              ${"rascunho"===s.status?"badge-warning":""}\n            `,children:(s.status||"rascunho").toUpperCase()})]})]})]}),r.length>0&&t.jsxs("div",{className:"card p-6",children:[t.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Resultados dos Testes"}),t.jsx("div",{className:"overflow-hidden",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Equipamento"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Tipo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Valor"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Resultado"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Data"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Responsável"})]})}),t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map(e=>{const s=i.find(s=>String(s.id)===String(e.equipmentId));return t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:s&&s.tag||"N/A"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(e.testType||e.type||"N/A").toUpperCase()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(a=e.value,r=e.unit,`${a.toFixed(2)} ${r}`)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`\n                          badge\n                          ${"BOM"===e.result?"badge-success":""}\n                          ${"ACEITÁVEL"===e.result?"badge-warning":""}\n                          ${"REPROVADO"===e.result?"badge-danger":""}\n                        `,children:e.result||e.classification||"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:Z(e.performedAt||e.measuredAt)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.performedBy||"N/A"})]},e.id);var a,r})})]})})]}),(s.observations||s.recommendations)&&t.jsxs("div",{className:"card p-6",children:[t.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Observações e Recomendações"}),t.jsxs("div",{className:"space-y-4",children:[s.observations&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Observações"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:s.observations})]}),s.recommendations&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Recomendações"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:s.recommendations})]})]})]})]}):t.jsx("div",{className:"text-center py-8",children:t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Relatório não encontrado"})})}function ne(){const[e,s]=c.useState([]),[a,r]=c.useState(!0),[l,i]=c.useState(""),[n,d]=c.useState(!1),[m,x]=c.useState(null),[u,g]=c.useState({tag:"",category:"motor",description:"",location:"",manufacturer:"",model:"",serialNumber:"",installationDate:"",lastMaintenance:"",status:"ativo",notes:""});c.useEffect(()=>{h()},[]);const h=async()=>{try{r(!0);const e=await ee();s(e)}catch(e){}finally{r(!1)}},p=async e=>{if(confirm("Tem certeza que deseja excluir este equipamento?"))try{await async function(e){try{return await P.deleteEquipment(String(e))}catch(s){return null}}(e),h()}catch(s){alert("Erro ao deletar equipamento")}},b=()=>{g({tag:"",category:"motor",description:"",location:"",manufacturer:"",model:"",serialNumber:"",installationDate:"",lastMaintenance:"",status:"ativo",notes:""})},f=e.filter(e=>(e.tag||"").toLowerCase().includes(l.toLowerCase())||(e.description||"").toLowerCase().includes(l.toLowerCase())||(e.location||"").toLowerCase().includes(l.toLowerCase()));return a?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),t.jsx("p",{className:"text-gray-400 mt-4",children:"Carregando equipamentos..."})]})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Lista de Equipamentos"}),t.jsx("p",{className:"text-gray-400",children:"Gerencie todos os equipamentos do sistema"})]}),t.jsxs("button",{onClick:()=>{d(!0),x(null),b()},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-semibold flex items-center space-x-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[t.jsx(k,{className:"h-5 w-5"}),t.jsx("span",{children:"Novo Equipamento"})]})]}),n&&t.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 p-8 shadow-xl",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("div",{className:"p-3 bg-blue-100 rounded-xl mr-4",children:t.jsx(k,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:m?"Editar Equipamento":"Novo Equipamento"}),t.jsx("p",{className:"text-gray-400",children:m?"Atualize as informações do equipamento":"Adicione um novo equipamento ao sistema"})]})]}),t.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e={...u,name:u.tag||u.description,id:m?.id};({ok:!0,errors:[]}).ok,m&&void 0!==m.id?await async function(e,s){try{const t={tag:s.tag||s.name,description:s.name,manufacturer:s.manufacturer,model:s.model};return await P.updateEquipment(String(e),t)}catch(t){return null}}(m.id,e):await async function(e){try{const s={tag:e.tag||e.name,category:"motor",description:e.name,location:"",manufacturer:e.manufacturer||"",model:e.model||"",serialNumber:"",installationDate:e.nextCalibration||(new Date).toISOString(),lastMaintenance:e.calibrationDue||(new Date).toISOString(),status:"ativo",notes:""};return await P.addEquipment(s)}catch(s){return null}}(e),d(!1),x(null),b(),h()}catch(s){alert("Erro ao salvar equipamento")}},className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Tag *"}),t.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.tag,onChange:e=>g({...u,tag:e.target.value}),placeholder:"Ex: MOTOR-01, TRAFO-02",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Categoria *"}),t.jsxs("select",{className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.category,onChange:e=>g({...u,category:e.target.value}),required:!0,children:[t.jsx("option",{value:"motor",children:"Motor"}),t.jsx("option",{value:"transformador",children:"Transformador"}),t.jsx("option",{value:"gerador",children:"Gerador"}),t.jsx("option",{value:"painel",children:"Painel"}),t.jsx("option",{value:"cabo",children:"Cabo"}),t.jsx("option",{value:"outro",children:"Outro"})]})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Descrição *"}),t.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.description,onChange:e=>g({...u,description:e.target.value}),placeholder:"Descrição detalhada do equipamento",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Localização *"}),t.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.location,onChange:e=>g({...u,location:e.target.value}),placeholder:"Ex: Sala 01, Subestação A",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Fabricante *"}),t.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.manufacturer,onChange:e=>g({...u,manufacturer:e.target.value}),placeholder:"Ex: WEG, Siemens, ABB",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Modelo *"}),t.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.model,onChange:e=>g({...u,model:e.target.value}),placeholder:"Ex: W22, 1LA7",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Número de Série *"}),t.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.serialNumber,onChange:e=>g({...u,serialNumber:e.target.value}),placeholder:"Número de série do equipamento",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Data de Instalação *"}),t.jsx("input",{type:"date",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.installationDate,onChange:e=>g({...u,installationDate:e.target.value}),required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Última Manutenção"}),t.jsx("input",{type:"date",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.lastMaintenance,onChange:e=>g({...u,lastMaintenance:e.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Status *"}),t.jsxs("select",{className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:u.status,onChange:e=>g({...u,status:e.target.value}),required:!0,children:[t.jsx("option",{value:"ativo",children:"Ativo"}),t.jsx("option",{value:"inativo",children:"Inativo"}),t.jsx("option",{value:"manutencao",children:"Manutenção"})]})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Observações"}),t.jsx("textarea",{className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",rows:3,value:u.notes,onChange:e=>g({...u,notes:e.target.value}),placeholder:"Observações adicionais sobre o equipamento"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-700",children:[t.jsx("button",{type:"button",onClick:()=>{d(!1),x(null),b()},className:"px-6 py-3 bg-gray-700 text-gray-200 rounded-xl hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-all duration-200 font-semibold",children:"Cancelar"}),t.jsx("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105",children:m?"Atualizar Equipamento":"Salvar Equipamento"})]})]})]}),t.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 p-8 shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-3 bg-green-100 rounded-xl mr-4",children:t.jsx(o,{className:"w-6 h-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Equipamentos Cadastrados"}),t.jsxs("p",{className:"text-gray-400",children:[f.length," equipamento(s) encontrado(s)"]})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(R,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar equipamentos...",className:"w-80 pl-12 pr-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:l,onChange:e=>i(e.target.value)})]})]}),t.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-700",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider",children:"Tag"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider",children:"Categoria"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider",children:"Localização"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"relative px-6 py-4",children:t.jsx("span",{className:"sr-only",children:"Ações"})})]})}),t.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:0===f.length?t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx(o,{className:"h-12 w-12 text-gray-500 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"Nenhum equipamento encontrado"}),t.jsx("p",{className:"text-gray-500 mb-4",children:l?"Tente ajustar os termos de busca":"Comece adicionando um novo equipamento"}),!l&&t.jsxs("button",{onClick:()=>{d(!0),x(null),b()},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-semibold flex items-center space-x-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[t.jsx(k,{className:"h-5 w-5"}),t.jsx("span",{children:"Adicionar Equipamento"})]})]})})}):f.map(e=>t.jsxs("tr",{className:"hover:bg-gray-700 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-white",children:e.tag||"N/A"}),t.jsx("div",{className:"text-sm text-gray-400",children:e.description||"N/A"})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400",children:e.category})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.location||"N/A"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`\n                        inline-flex items-center px-3 py-1 rounded-full text-xs font-medium\n                        ${"ativo"===e.status?"bg-green-500/20 text-green-400":""}\n                        ${"inativo"===e.status?"bg-red-500/20 text-red-400":""}\n                        ${"manutencao"===e.status?"bg-yellow-500/20 text-yellow-400":""}\n                      `,children:(e.status||"ativo").toUpperCase()})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:()=>{return x(s=e),g({tag:s.tag||"",category:s.category,description:s.description||"",location:s.location||"",manufacturer:s.manufacturer||"",model:s.model||"",serialNumber:s.serialNumber||"",installationDate:s.installationDate||"",lastMaintenance:s.lastMaintenance||"",status:s.status||"ativo",notes:s.notes||""}),void d(!0);var s},className:"text-blue-400 hover:text-blue-300 p-2 rounded-lg hover:bg-blue-500/10 transition-all duration-200",title:"Editar equipamento",children:t.jsx(A,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>p(e.id||0),className:"text-red-400 hover:text-red-300 p-2 rounded-lg hover:bg-red-500/10 transition-all duration-200",title:"Excluir equipamento",children:t.jsx(q,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})]})}const oe=()=>{const e=p(),[s,a]=c.useState(!0),[r,l]=c.useState(!1),[i,o]=c.useState({id:"",defaultOperator:"",defaultClient:"",defaultSite:"",aiEnabled:!0,aiLearningRate:.1,defaultLimitTOhm:5,createdAt:new Date,updatedAt:new Date}),[d,m]=c.useState([]),[u,g]=c.useState(null),[h,b]=c.useState(!1);c.useEffect(()=>{f()},[]);const f=async()=>{try{a(!0);const[e,s]=await Promise.all([P.getSystemConfig(),P.getCategoryProfiles()]);e&&o(e),m(s)}catch(e){}finally{a(!1)}},y=(e,s)=>{o(t=>({...t,[e]:s}))};return s?t.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando parâmetros..."})]})}):t.jsxs("div",{className:"min-h-screen bg-gray-900",children:[t.jsx("div",{className:"pt-4",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"bg-gray-800/70 border border-gray-700 rounded-2xl shadow-xl px-5 sm:px-8 py-6 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx("button",{onClick:()=>e("/"),className:"mr-4 mt-1 p-2 text-gray-400 hover:text-gray-200 transition-colors rounded-lg hover:bg-gray-700","aria-label":"Voltar",children:t.jsx(j,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-extrabold tracking-tight bg-gradient-to-r from-blue-400 via-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"Parâmetros e Configurações"}),t.jsx("p",{className:"text-gray-400 mt-1",children:"Configure perfis por categoria e sistema de IA"})]})]}),t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{className:"flex items-center text-sm text-gray-200 bg-blue-500/15 px-4 py-2 rounded-full border border-blue-500/30 shadow-inner",children:[t.jsx("span",{className:"relative mr-2 block w-2 h-2 rounded-full bg-blue-400",children:t.jsx("span",{className:"absolute inset-0 rounded-full bg-blue-400 animate-ping opacity-60"})}),t.jsx(x,{className:"w-4 h-4 mr-1 text-blue-400"}),t.jsx("span",{className:"font-medium",children:"IA Ativa"})]})})]})})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-700/40",children:t.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center",children:[t.jsx(n,{className:"w-5 h-5 mr-2 text-blue-400"}),"Configurações do Sistema"]})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-md font-medium text-white mb-4",children:"Configurações Padrão"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Operador Padrão"}),t.jsx("input",{type:"text",value:i.defaultOperator,onChange:e=>y("defaultOperator",e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Cliente Padrão"}),t.jsx("input",{type:"text",value:i.defaultClient,onChange:e=>y("defaultClient",e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Local Padrão"}),t.jsx("input",{type:"text",value:i.defaultSite,onChange:e=>y("defaultSite",e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Limite OVRG Padrão (TΩ)"}),t.jsx("input",{type:"number",min:"1",max:"10",value:i.defaultLimitTOhm,onChange:e=>y("defaultLimitTOhm",parseInt(e.target.value)),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-md font-medium text-white mb-4 flex items-center",children:[t.jsx(x,{className:"w-4 h-4 mr-2 text-blue-400"}),"Configurações de IA"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"aiEnabled",checked:i.aiEnabled,onChange:e=>y("aiEnabled",e.target.checked),className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-600 rounded bg-gray-700"}),t.jsx("label",{htmlFor:"aiEnabled",className:"ml-2 block text-sm text-gray-200",children:"IA Habilitada"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Taxa de Aprendizado da IA"}),t.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",value:i.aiLearningRate,onChange:e=>y("aiLearningRate",parseFloat(e.target.value)),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Controla a velocidade de aprendizado da IA (0.0 - 1.0)"})]})]})]}),t.jsx("button",{onClick:async()=>{try{l(!0),await P.saveSystemConfig(i),alert("Configurações salvas com sucesso!")}catch(e){alert("Erro ao salvar configurações")}finally{l(!1)}},disabled:r,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-4 rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:r?t.jsxs(t.Fragment,{children:[t.jsx(w,{className:"w-5 h-5 mr-2 animate-spin"}),"Salvando..."]}):t.jsxs(t.Fragment,{children:[t.jsx(C,{className:"w-5 h-5 mr-2"}),"Salvar Configurações"]})})]})]}),t.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-700/40",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center",children:[t.jsx(x,{className:"w-5 h-5 mr-2 text-blue-400"}),"Perfis por Categoria"]}),t.jsx("button",{onClick:()=>b(!0),className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-2 rounded-lg hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-gray-900",children:t.jsx(k,{className:"w-4 h-4"})})]})}),t.jsx("div",{className:"p-6",children:0===d.length?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(x,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-300",children:"Nenhum perfil configurado"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Crie perfis para melhorar a precisão da IA"})]}):t.jsx("div",{className:"space-y-4",children:d.map(e=>t.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 hover:bg-gray-700 transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-white",children:e.name}),t.jsx("p",{className:"text-sm text-gray-300",children:e.description})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-300",children:e.category}),t.jsx("button",{onClick:()=>g(e),className:"p-1 text-gray-300 hover:text-white",children:t.jsx(A,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>(async e=>{if(confirm("Tem certeza que deseja excluir este perfil?"))try{l(!0),await P.deleteCategoryProfile(e),await f(),alert("Perfil excluído com sucesso!")}catch(s){alert("Erro ao excluir perfil")}finally{l(!1)}})(e.id),className:"p-1 text-gray-300 hover:text-red-400",children:t.jsx(q,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-300",children:"Confiança IA:"}),t.jsxs("span",{className:"ml-2 text-white",children:[(100*e.aiConfidence).toFixed(0),"%"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-300",children:"Resistência Base:"}),t.jsxs("span",{className:"ml-2 text-white",children:[e.baseResistance.min.toExponential(1)," - ",e.baseResistance.max.toExponential(1)," Ω"]})]})]})]},e.id))})})]})]}),(u||h)&&t.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-700/40",children:t.jsx("h3",{className:"text-lg font-semibold text-white",children:u?"Editar Perfil":"Novo Perfil"})}),t.jsx("div",{className:"p-6",children:t.jsx(de,{profile:u||(v="cabo",{id:"",category:v,name:`Perfil ${v.charAt(0).toUpperCase()+v.slice(1)}`,description:`Perfil padrão para ${v}`,baseResistance:{min:1e6,max:1e9,decay:.1},temperature:{min:20,max:30,effect:.02},humidity:{min:40,max:60,effect:.01},aiConfidence:.9,createdAt:new Date}),onSave:async e=>{try{l(!0),e.id,await P.saveCategoryProfile(e),await f(),g(null),b(!1),alert("Perfil salvo com sucesso!")}catch(s){alert("Erro ao salvar perfil")}finally{l(!1)}},onCancel:()=>{g(null),b(!1)},onChange:(e,s)=>{u&&g(t=>t?{...t,[e]:s}:null)},saving:r})})]})})]})]});var v},de=({profile:e,onSave:s,onCancel:a,onChange:r,saving:l})=>t.jsxs("div",{className:"space-y-6 text-gray-200",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Nome do Perfil"}),t.jsx("input",{type:"text",value:e.name,onChange:e=>r("name",e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Categoria"}),t.jsxs("select",{value:e.category,onChange:e=>r("category",e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"cabo",children:"Cabo"}),t.jsx("option",{value:"motor",children:"Motor"}),t.jsx("option",{value:"bomba",children:"Bomba"}),t.jsx("option",{value:"trafo",children:"Transformador"}),t.jsx("option",{value:"outro",children:"Outro"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Descrição"}),t.jsx("textarea",{value:e.description,onChange:e=>r("description",e.target.value),rows:3,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-white mb-4",children:"Resistência Base"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Mínima (Ω)"}),t.jsx("input",{type:"number",value:e.baseResistance.min,onChange:s=>r("baseResistance",{...e.baseResistance,min:parseFloat(s.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Máxima (Ω)"}),t.jsx("input",{type:"number",value:e.baseResistance.max,onChange:s=>r("baseResistance",{...e.baseResistance,max:parseFloat(s.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Decaimento (%)"}),t.jsx("input",{type:"number",step:"0.01",value:100*e.baseResistance.decay,onChange:s=>r("baseResistance",{...e.baseResistance,decay:parseFloat(s.target.value)/100}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-white mb-4",children:"Temperatura"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Mínima (°C)"}),t.jsx("input",{type:"number",value:e.temperature.min,onChange:s=>r("temperature",{...e.temperature,min:parseFloat(s.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Máxima (°C)"}),t.jsx("input",{type:"number",value:e.temperature.max,onChange:s=>r("temperature",{...e.temperature,max:parseFloat(s.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Efeito (%/°C)"}),t.jsx("input",{type:"number",step:"0.001",value:100*e.temperature.effect,onChange:s=>r("temperature",{...e.temperature,effect:parseFloat(s.target.value)/100}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-white mb-4",children:"Umidade"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Mínima (%)"}),t.jsx("input",{type:"number",value:e.humidity.min,onChange:s=>r("humidity",{...e.humidity,min:parseFloat(s.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Máxima (%)"}),t.jsx("input",{type:"number",value:e.humidity.max,onChange:s=>r("humidity",{...e.humidity,max:parseFloat(s.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Efeito (%/%)"}),t.jsx("input",{type:"number",step:"0.001",value:100*e.humidity.effect,onChange:s=>r("humidity",{...e.humidity,effect:parseFloat(s.target.value)/100}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Confiança da IA (0-100%)"}),t.jsx("input",{type:"number",min:"0",max:"100",value:100*e.aiConfidence,onChange:e=>r("aiConfidence",parseFloat(e.target.value)/100),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{className:"flex space-x-3 pt-4",children:[t.jsx("button",{onClick:a,className:"flex-1 bg-gray-700 text-gray-200 py-2 px-4 rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500/50 focus:ring-offset-2 focus:ring-offset-gray-900",children:"Cancelar"}),t.jsx("button",{onClick:()=>s(e),disabled:l,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-2 px-4 rounded-md hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:l?t.jsxs(t.Fragment,{children:[t.jsx(w,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):t.jsxs(t.Fragment,{children:[t.jsx(C,{className:"w-4 h-4 mr-2"}),"Salvar Perfil"]})})]})]}),ce=()=>{const e=p(),[s,a]=c.useState(!1),[o,d]=c.useState(!1),[m,u]=c.useState(!1),[g,w]=c.useState(!1),[C,S]=c.useState(null),[R,A]=c.useState("motor"),[T,I]=c.useState(1),[D,O]=c.useState(60),[F,M]=c.useState(""),[L,$]=c.useState(""),[V,B]=c.useState(["R","S","T"]),[G,_]=c.useState("Terra"),[H,J]=c.useState([["R","S"],["S","T"],["T","R"]]),[K,W]=c.useState(null),[Z,Q]=c.useState([]),[X,Y]=c.useState(0),[ee,se]=c.useState([]);c.useEffect(()=>{te(),ae()},[]),c.useEffect(()=>{if(C){const e=setTimeout(()=>{S(null)},5e3);return()=>clearTimeout(e)}},[C]);const te=async()=>{try{const e=await P.getCategoryProfiles();se(e)}catch(e){}},ae=async()=>{try{const e=await P.getSystemConfig();e&&$(e.defaultOperator||"")}catch(e){}},re=(e,s)=>{S({type:e,message:s})},le=(e,s,t)=>{const a=[...H];a[e][s]=t,J(a)};return t.jsxs("div",{className:"min-h-screen bg-gray-900",children:[C&&t.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-right",children:t.jsxs("div",{className:"flex items-center p-4 rounded-lg shadow-lg "+("success"===C.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:["success"===C.type?t.jsx(b,{className:"w-5 h-5 mr-2"}):t.jsx(f,{className:"w-5 h-5 mr-2"}),t.jsx("span",{className:"font-medium",children:C.message}),t.jsx("button",{onClick:()=>S(null),className:"ml-4 text-gray-400 hover:text-gray-600",children:t.jsx(y,{className:"w-4 h-4"})})]})}),t.jsx("div",{className:"pt-4",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"bg-gray-800/70 border border-gray-700 rounded-2xl shadow-xl px-5 sm:px-8 py-6 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx("button",{onClick:()=>e("/"),className:"mr-4 mt-1 p-2 text-gray-400 hover:text-gray-200 transition-colors rounded-lg hover:bg-gray-700","aria-label":"Voltar",children:t.jsx(j,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-extrabold tracking-tight bg-gradient-to-r from-purple-400 via-indigo-400 to-blue-400 bg-clip-text text-transparent",children:"Gerador Multi-Fase"}),t.jsxs("p",{className:"text-gray-400 mt-1 flex items-center",children:[t.jsx(v,{className:"w-4 h-4 mr-1 text-purple-400"}),"Relatórios IR para equipamentos multi-fase com IA"]})]})]}),t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{className:"flex items-center text-sm text-gray-200 bg-purple-500/15 px-4 py-2 rounded-full border border-purple-500/30 shadow-inner",children:[t.jsx("span",{className:"relative mr-2 block w-2 h-2 rounded-full bg-purple-400",children:t.jsx("span",{className:"absolute inset-0 rounded-full bg-purple-400 animate-ping opacity-60"})}),t.jsx(x,{className:"w-4 h-4 mr-1 text-purple-400"}),t.jsx("span",{className:"font-medium",children:"IA Ativa"})]})})]})})}),t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-8",children:[t.jsxs("div",{className:"flex items-center mb-8",children:[t.jsx("div",{className:"p-3 bg-purple-500/20 rounded-xl mr-4",children:t.jsx(n,{className:"w-6 h-6 text-purple-400"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Configuração do Equipamento"}),t.jsx("p",{className:"text-gray-400",children:"Configure os parâmetros do teste multi-fase"})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[t.jsx(r,{className:"w-4 h-4 mr-2 text-purple-400"}),"Tipo de Equipamento"]}),t.jsx("select",{className:"w-full px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",value:R,onChange:e=>A(e.target.value),children:[{value:"motor",label:"Motor",description:"Motores elétricos"},{value:"trafo",label:"Transformador",description:"Transformadores de potência"},{value:"bomba",label:"Bomba",description:"Bombas e sistemas hidráulicos"},{value:"cabo",label:"Cabo",description:"Cabos de potência multi-condutores"},{value:"outro",label:"Outro",description:"Outros equipamentos multi-fase"}].map(e=>t.jsxs("option",{value:e.value,children:[e.label," - ",e.description]},e.value))})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[t.jsx(r,{className:"w-4 h-4 mr-2 text-purple-400"}),"Tensão (kV)"]}),t.jsx("input",{type:"number",className:"w-full px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",value:T,onChange:e=>I(Number(e.target.value)),step:"0.1",min:"0.1",max:"50",placeholder:"1.0"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[t.jsx(N,{className:"w-4 h-4 mr-2 text-gray-400"}),"Duração (min)"]}),t.jsx("input",{type:"number",className:"w-full px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",value:D,onChange:e=>O(Number(e.target.value)),min:"60",max:"600",placeholder:"60"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[t.jsx(N,{className:"w-4 h-4 mr-2 text-gray-400"}),"Tag do Equipamento"]}),t.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",placeholder:"Ex: MOTOR-01, TRAFO-02",value:F,onChange:e=>M(e.target.value)})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[t.jsx(N,{className:"w-4 h-4 mr-2 text-gray-400"}),"Operador Responsável"]}),t.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",placeholder:"Nome do operador responsável",value:L,onChange:e=>$(e.target.value)})]})]})]}),t.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-8",children:[t.jsxs("div",{className:"flex items-center mb-8",children:[t.jsx("div",{className:"p-3 bg-indigo-500/20 rounded-xl mr-4",children:t.jsx(l,{className:"w-6 h-6 text-indigo-400"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Configuração das Fases"}),t.jsx("p",{className:"text-gray-400",children:"Configure as fases e combinações do sistema"})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 items-center",children:[t.jsx(r,{className:"w-4 h-4 mr-2 text-indigo-400"}),"Fases do Sistema"]}),t.jsxs("button",{type:"button",onClick:()=>{const e=`Fase${V.length+1}`;B([...V,e])},className:"text-indigo-400 hover:text-indigo-300 text-sm font-medium bg-indigo-500/20 px-3 py-2 rounded-lg hover:bg-indigo-500/30 transition-colors border border-indigo-500/30",children:[t.jsx(k,{className:"w-4 h-4 inline mr-1"}),"Adicionar Fase"]})]}),t.jsx("div",{className:"space-y-3",children:V.map((e,s)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"text",className:"flex-1 px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",value:e,onChange:e=>((e,s)=>{const t=V[e],a=[...V];a[e]=s,B(a);const r=H.map(e=>e.map(e=>e===t?s:e));J(r)})(s,e.target.value),placeholder:`Fase ${s+1}`}),V.length>2&&t.jsx("button",{type:"button",onClick:()=>(e=>{if(V.length<=2)return void alert("Deve ter pelo menos 2 fases");const s=V.filter((s,t)=>t!==e);B(s);const t=V[e],a=H.filter(e=>!e.includes(t));J(a)})(s),className:"p-3 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-xl transition-colors",children:t.jsx(q,{className:"w-5 h-5"})})]},s))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 mb-3 items-center",children:[t.jsx(N,{className:"w-4 h-4 mr-2 text-gray-400"}),"Nome da Massa/Terra"]}),t.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",value:G,onChange:e=>_(e.target.value),placeholder:"Terra, PE, Massa"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("label",{className:"flex text-sm font-semibold text-gray-200 items-center",children:[t.jsx(r,{className:"w-4 h-4 mr-2 text-indigo-400"}),"Combinações Fase/Fase"]}),t.jsxs("button",{type:"button",onClick:()=>{if(V.length<2)return;const e=[V[0],V[1]];J([...H,e])},className:"text-indigo-400 hover:text-indigo-300 text-sm font-medium bg-indigo-500/20 px-3 py-2 rounded-lg hover:bg-indigo-500/30 transition-colors border border-indigo-500/30",children:[t.jsx(k,{className:"w-4 h-4 inline mr-1"}),"Adicionar Combinação"]})]}),t.jsx("div",{className:"space-y-3",children:H.map((e,s)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("select",{className:"flex-1 px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",value:e[0],onChange:e=>le(s,0,e.target.value),children:V.map(e=>t.jsx("option",{value:e,children:e},e))}),t.jsx("span",{className:"text-gray-400 font-bold text-lg",children:"×"}),t.jsx("select",{className:"flex-1 px-4 py-3 bg-gray-700 border-2 border-gray-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",value:e[1],onChange:e=>le(s,1,e.target.value),children:V.map(e=>t.jsx("option",{value:e,children:e},e))}),t.jsx("button",{type:"button",onClick:()=>(e=>{const s=H.filter((s,t)=>t!==e);J(s)})(s),className:"p-3 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-xl transition-colors",children:t.jsx(q,{className:"w-5 h-5"})})]},s))})]})]})]}),Z.length>0&&t.jsx("div",{className:"bg-red-500/10 border-2 border-red-500/30 rounded-xl p-6",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(f,{className:"w-6 h-6 text-red-400 mt-0.5 mr-3"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-2",children:"Erros de Validação"}),t.jsx("ul",{className:"space-y-1 text-sm text-red-300",children:Z.map((e,s)=>t.jsxs("li",{className:"flex items-center",children:[t.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full mr-2"}),e]},s))})]})]})}),t.jsx("button",{onClick:async()=>{Q([]);const e=[];if(F.trim()||e.push("Tag do equipamento é obrigatória"),L.trim()||e.push("Operador é obrigatório"),V.length<2&&e.push("Deve ter pelo menos 2 fases"),0===H.length&&e.push("Deve ter pelo menos uma combinação de fases"),e.length>0)Q(e);else try{d(!0);const e={id:crypto.randomUUID(),equipmentType:R,phases:{names:V},voltage:T,duration:D,intervals:[15,30,45,60],createdAt:new Date,updatedAt:new Date},s=await z(e,{equipmentTag:F,operator:L,phaseCombinations:H,groundName:G});W(s.report),Y(s.confidence),s.warnings&&s.warnings.length>0&&Q(s.warnings),await P.recordAILearning({id:Date.now(),category:R,phaseCount:V.length,phaseNames:V,input:JSON.stringify({equipmentType:R,voltage:T,phaseNames:V,combinations:H}),output:JSON.stringify(s),createdAt:(new Date).toISOString()})}catch(s){Q(["Erro interno ao gerar relatório multi-fase"])}finally{d(!1)}},disabled:o,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 px-6 rounded-xl hover:from-purple-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-purple-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]",children:o?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"Gerando com IA..."]}):t.jsxs(t.Fragment,{children:[t.jsx(v,{className:"w-6 h-6 mr-3"}),"Gerar Relatório Multi-Fase"]})})]}),t.jsx("div",{className:"space-y-8",children:K?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-3 bg-green-500/20 rounded-xl mr-4",children:t.jsx(b,{className:"w-6 h-6 text-green-400"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Relatório Gerado"}),t.jsx("p",{className:"text-gray-400",children:"Relatório multi-fase criado com sucesso"})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("span",{className:"text-sm font-semibold text-gray-300",children:["Confiança IA: ",(100*X).toFixed(0),"%"]}),t.jsx("div",{className:"w-20 bg-gray-700 rounded-full h-3",children:t.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full transition-all duration-500",style:{width:100*X+"%"}})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Equipamento:"}),t.jsx("span",{className:"ml-3 text-white bg-gray-700 px-3 py-1 rounded-lg text-sm font-medium",children:K.equipmentTag})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Operador:"}),t.jsx("span",{className:"ml-3 text-white bg-gray-700 px-3 py-1 rounded-lg text-sm font-medium",children:K.operator})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Fases:"}),t.jsx("span",{className:"ml-3 text-white bg-gray-700 px-3 py-1 rounded-lg text-sm font-medium",children:V.join(", ")})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-semibold text-gray-300 w-24",children:"Data/Hora:"}),t.jsx("span",{className:"ml-3 text-white bg-gray-700 px-3 py-1 rounded-lg text-sm font-medium",children:K.createdAt.toLocaleString("pt-BR")})]})]})]}),t.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-8",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("div",{className:"p-3 bg-blue-500/20 rounded-xl mr-4",children:t.jsx(i,{className:"w-6 h-6 text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Resumo dos Testes"}),t.jsx("p",{className:"text-gray-400",children:"Testes realizados no equipamento"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm font-semibold text-gray-300 border-b-2 border-gray-600 pb-3",children:[t.jsx("span",{children:"Teste"}),t.jsx("span",{children:"Leituras"}),t.jsx("span",{children:"Status"})]}),H.map((e,s)=>t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm py-3 border-b border-gray-700",children:[t.jsxs("span",{className:"font-semibold text-white",children:[e[0]," × ",e[1]]}),t.jsxs("span",{className:"text-gray-400",children:[K.readings?.filter(e=>e.phase===s).length||4," leituras"]}),t.jsxs("span",{className:"text-green-400 font-semibold flex items-center",children:[t.jsx(b,{className:"w-4 h-4 mr-1"}),"Completo"]})]},s)),V.map((e,s)=>t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm py-3 border-b border-gray-700",children:[t.jsxs("span",{className:"font-semibold text-white",children:[e," × ",G]}),t.jsx("span",{className:"text-gray-400",children:"4 leituras"}),t.jsxs("span",{className:"text-green-400 font-semibold flex items-center",children:[t.jsx(b,{className:"w-4 h-4 mr-1"}),"Completo"]})]},`ground-${s}`))]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[!K.isSaved&&t.jsx("button",{onClick:async()=>{if(K)try{u(!0);const e={...K,isSaved:!0};await P.saveMultiPhaseReport(e),W(e),re("success","Relatório multi-fase salvo com sucesso!")}catch(e){re("error","Erro ao salvar relatório")}finally{u(!1)}},disabled:m,className:"flex-1 py-3 px-6 rounded-xl focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold transition-all duration-200 hover:scale-[1.02] "+(K.isSaved?"bg-green-500/20 text-green-400 border-2 border-green-500/30":"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 focus:ring-green-500/50"),children:m?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Salvando..."]}):t.jsxs(t.Fragment,{children:[t.jsx(E,{className:"w-5 h-5 mr-2"}),"Salvar no Banco"]})}),t.jsx("button",{onClick:async()=>{if(K)try{w(!0);const e=await U(K),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`relatorio_multifase_${K.equipmentTag}_${(new Date).toISOString().split("T")[0]}.pdf`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)}catch(e){re("error","Erro ao exportar relatório")}finally{w(!1)}},disabled:g,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 px-6 rounded-xl hover:from-purple-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-purple-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-semibold transition-all duration-200 hover:scale-[1.02]",children:g?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Exportando..."]}):t.jsxs(t.Fragment,{children:[t.jsx(h,{className:"w-5 h-5 mr-2"}),"Exportar PDF"]})}),t.jsxs("button",{onClick:()=>{W(null),Q([]),Y(0)},className:"flex-1 bg-gray-700 text-gray-200 py-3 px-6 rounded-xl hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-500/50 focus:ring-offset-2 focus:ring-offset-gray-900 flex items-center justify-center font-semibold transition-all duration-200 hover:scale-[1.02]",children:[t.jsx(k,{className:"w-5 h-5 mr-2"}),"Gerar Novo"]})]})]}):t.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-700/20 p-12 text-center",children:[t.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-500/20 to-indigo-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(l,{className:"w-12 h-12 text-purple-400"})}),t.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Relatório Multi-Fase"}),t.jsx("p",{className:"text-gray-400 mb-6 max-w-md mx-auto",children:"Configure as fases e combinações do seu equipamento e gere um relatório completo com IA"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-400 max-w-lg mx-auto",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(b,{className:"w-4 h-4 mr-2 text-green-400"}),"Testes fase × fase automatizados"]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(b,{className:"w-4 h-4 mr-2 text-green-400"}),"Testes fase × massa correlacionados"]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(b,{className:"w-4 h-4 mr-2 text-green-400"}),"Análise de consistência com IA"]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(b,{className:"w-4 h-4 mr-2 text-green-400"}),"Exportação profissional em PDF"]})]})]})})]})})]})},me=()=>{const[e,s]=c.useState([]),[a,r]=c.useState(!0),[n,o]=c.useState(""),[m,x]=c.useState("all");c.useEffect(()=>{u()},[]);const u=async()=>{try{r(!0);const t=await P.getAllIRReports(),a=await P.getMultiPhaseReports();let l=[...t.map(e=>({id:e.id,type:"ir",title:`${e.category||"Sem Categoria"} - ${e.tag||"Sem Tag"}`,createdAt:e.createdAt,equipment:e.tag,category:e.category,isSaved:e.isSaved})),...a.map(e=>({id:e.id,type:"multi",title:`Multi-Fase - ${e.equipment?.model||"Sem Modelo"}`,createdAt:e.createdAt,equipment:e.equipment?.model,category:"Multi-Fase",isSaved:!0}))];if($.isEnabled())try{const e=(await $.getRecentReports($.getUserId(),50)).map(e=>({id:e.id,type:e.type,title:"ir"===e.type?`${e.category||"Sem Categoria"} - ${e.equipment||"Sem Equipamento"}`:`Multi-Fase - ${e.equipment?.model||"Sem Modelo"}`,createdAt:e.createdAt?.toDate?.()||new Date(e.createdAt),equipment:"ir"===e.type?e.equipment:e.equipment?.model,category:"ir"===e.type?e.category:"Multi-Fase",isSaved:!0})),s=[...l,...e];l=s.filter((e,s,t)=>s===t.findIndex(s=>s.id===e.id))}catch(e){}l.sort((e,s)=>s.createdAt.getTime()-e.createdAt.getTime()),s(l)}catch(e){}finally{r(!1)}},p=e.filter(e=>{const s=e.title.toLowerCase().includes(n.toLowerCase())||e.equipment?.toLowerCase().includes(n.toLowerCase())||e.category?.toLowerCase().includes(n.toLowerCase()),t="all"===m||e.type===m;return s&&t});return a?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white",children:"Relatórios"}),t.jsx("p",{className:"text-gray-400 mt-1",children:"Visualize e gerencie todos os relatórios salvos"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{className:"text-sm text-gray-400",children:[p.length," de ",e.length," relatórios"]})})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar por equipamento, categoria...",value:n,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("select",{value:m,onChange:e=>x(e.target.value),className:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"Todos os tipos"}),t.jsx("option",{value:"ir",children:"Relatórios IR"}),t.jsx("option",{value:"multi",children:"Multi-Fase"})]})]})}),t.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:0===p.length?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(i,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"Nenhum relatório encontrado"}),t.jsx("p",{className:"text-gray-500",children:n||"all"!==m?"Tente ajustar os filtros de busca":"Crie seu primeiro relatório para começar"})]}):t.jsx("div",{className:"divide-y divide-gray-700",children:p.map(e=>{return t.jsx("div",{className:"p-6 hover:bg-gray-700 transition-colors",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"p-3 rounded-lg "+("ir"===e.type?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400"),children:"ir"===e.type?t.jsx(i,{className:"w-6 h-6"}):t.jsx(l,{className:"w-6 h-6"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-medium text-white",children:e.title}),t.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-400",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(T,{className:"w-4 h-4"}),t.jsx("span",{children:(s=e.createdAt,s.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),e.equipment&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(I,{className:"w-4 h-4"}),t.jsx("span",{children:e.equipment})]}),e.isSaved&&t.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs",children:"Salvo"})]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(d,{to:`/report/${e.type}/${e.id}`,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",title:"Visualizar",children:t.jsx(g,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>(async e=>{try{if("ir"===e.type){const s=await P.getIRReport(e.id);s&&await G(s)}else{const s=await P.getMultiPhaseReport(e.id);s&&await _(s)}}catch(s){alert("Erro ao exportar relatório")}})(e),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",title:"Exportar",children:t.jsx(h,{className:"w-5 h-5"})})]})]})},e.id);var s})})})]})};function xe(){return t.jsx(D,{children:t.jsx(H,{children:t.jsxs(O,{children:[t.jsx(F,{path:"/",element:t.jsx(J,{})}),t.jsx(F,{path:"/generate",element:t.jsx(Q,{})}),t.jsx(F,{path:"/new",element:t.jsx(le,{})}),t.jsx(F,{path:"/report/:type/:id",element:t.jsx(ie,{})}),t.jsx(F,{path:"/equipment",element:t.jsx(ne,{})}),t.jsx(F,{path:"/parameters",element:t.jsx(oe,{})}),t.jsx(F,{path:"/multiphase",element:t.jsx(ce,{})}),t.jsx(F,{path:"/reports",element:t.jsx(me,{})})]})})})}const ue=document.getElementById("root");if(!ue)throw new Error("Elemento root não encontrado");M.createRoot(ue).render(t.jsx(L.StrictMode,{children:t.jsx(xe,{})})),setTimeout(async()=>{try{const{initializeDatabase:s}=await e(async()=>{const{initializeDatabase:e}=await import("./ai-engine-8WJZWTWf.js").then(e=>e.b);return{initializeDatabase:e}},__vite__mapDeps([4,5,6,2,3]));await s()}catch(s){}},100);
